!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(e){return e.getParam("save_enablewhendirty",!0)},a=function(e,n){e.notificationManager.open({text:n,type:"error"})},i=function(e){return function(n){var t=function(){n.setDisabled(o(e)&&!e.isDirty())};return e.on("NodeChange dirty",t),function(){return e.off("NodeChange dirty",t)}}};e.add("save",(function(e){var c;(c=e).ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return c.execCommand("mceSave")},onSetup:i(c)}),c.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return c.execCommand("mceCancel")},onSetup:i(c)}),c.addShortcut("Meta+S","","mceSave"),function(e){e.addCommand("mceSave",(function(){!function(e){var t=n.DOM.getParent(e.id,"form");if(!o(e)||e.isDirty()){if(e.save(),e.getParam("save_onsavecallback"))return e.execCallback("save_onsavecallback",e),e.nodeChanged();t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():a(e,"Error: Form submit field collision.")),e.nodeChanged()):a(e,"Error: No form element found.")}}(e)})),e.addCommand("mceCancel",(function(){var n,o;n=e,o=t.trim(n.startContent),n.getParam("save_oncancelcallback")?n.execCallback("save_oncancelcallback",n):n.resetContent(o)}))}(e)}))}();
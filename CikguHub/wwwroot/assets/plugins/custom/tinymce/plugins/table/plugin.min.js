!function(){"use strict";var n=function(){},t=function(n){return function(){return n}},e=function(n){return n};function r(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=t.concat(e);return n.apply(null,o)}}var o,u,i,c=function(n){return function(t){return!n(t)}},a=t(!1),l=t(!0),f=function(){return s},s=(o=function(n){return n.isNone()},{fold:function(n,t){return n()},is:a,isSome:a,isNone:l,getOr:i=function(n){return n},getOrThunk:u=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:t(null),getOrUndefined:t(void 0),or:i,orThunk:u,map:f,each:n,bind:f,exists:a,forall:l,filter:f,equals:o,equals_:o,toArray:function(){return[]},toString:t("none()")}),d=function(n){var e=t(n),r=function(){return u},o=function(t){return t(n)},u={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:l,isNone:a,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:r,orThunk:r,map:function(t){return d(t(n))},each:function(t){t(n)},bind:o,exists:o,forall:o,filter:function(t){return t(n)?u:s},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(a,(function(t){return e(n,t)}))}};return u},m={some:d,none:f,from:function(n){return null==n?s:d(n)}},p=function(n){return function(t){return r=typeof(e=t),(null===e?"null":"object"==r&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":r)===n;var e,r}},g=function(n){return function(t){return typeof t===n}},h=p("string"),v=p("object"),b=p("array"),w=g("boolean"),y=(void 0,function(n){return undefined===n}),x=function(n){return!(null===(t=n)||void 0===t);var t},C=g("function"),S=g("number"),T=Array.prototype.slice,R=Array.prototype.indexOf,O=Array.prototype.push,D=function(n,t){return e=n,r=t,-1<R.call(e,r);var e,r},A=function(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e))return!0;return!1},B=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},E=function(n,t){for(var e=n.length,r=new Array(e),o=0;o<e;o++){var u=n[o];r[o]=t(u,o)}return r},P=function(n,t){for(var e=0,r=n.length;e<r;e++)t(n[e],e)},I=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r)&&e.push(u)}return e},M=function(n,t,e){return function(n,t){for(var e=n.length-1;0<=e;e--)t(n[e])}(n,(function(n){e=t(e,n)})),e},k=function(n,t,e){return P(n,(function(n){e=t(e,n)})),e},N=function(n,t){return function(n,t,e){for(var r=0,o=n.length;r<o;r++){var u=n[r];if(t(u,r))return m.some(u);if(e(u,r))break}return m.none()}(n,t,a)},_=function(n,t){for(var e=0,r=n.length;e<r;e++)if(t(n[e],e))return m.some(e);return m.none()},z=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!b(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);O.apply(t,n[e])}return t},W=function(n,t){return z(E(n,t))},j=function(n,t){for(var e=0,r=n.length;e<r;++e)if(!0!==t(n[e],e))return!1;return!0},F=function(n){return[n]},L=function(n,t){return 0<=t&&t<n.length?m.some(n[t]):m.none()},H=function(n){return L(n,n.length-1)},q=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return m.none()},V=function(){return(V=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}).apply(this,arguments)};function U(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;var r=Array(n),o=0;for(t=0;t<e;t++)for(var u=arguments[t],i=0,c=u.length;i<c;i++,o++)r[o]=u[i];return r}var $,G=function(n){var t,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,t=n.apply(null,r)),t}},K=function(){return X(0,0)},X=function(n,t){return{major:n,minor:t}},Y=function(n,t){var e=String(t).toLowerCase();return 0===n.length?K():function(n,t){var e=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}}(n,t);if(!e)return{major:0,minor:0};var r=function(n){return Number(t.replace(e,"$"+n))};return X(r(1),r(2))}(n,e)},J=K,Q=function(n,t){var e=String(t).toLowerCase();return N(n,(function(n){return n.search(e)}))},Z=function(n,t,e){return""===t||n.length>=t.length&&n.substr(e,e+t.length)===t},nn=function(n,t){return-1!==n.indexOf(t)},tn=function(n,t){return Z(n,t,0)},en=function(n,t){return Z(n,t,n.length-t.length)},rn=($=/^\s+|\s+$/g,function(n){return n.replace($,"")}),on=function(n){return 0<n.length},un=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,cn=function(n){return function(t){return nn(t,n)}},an=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return nn(n,"edge/")&&nn(n,"chrome")&&nn(n,"safari")&&nn(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,un],search:function(n){return nn(n,"chrome")&&!nn(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return nn(n,"msie")||nn(n,"trident")}},{name:"Opera",versionRegexes:[un,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:cn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:cn("firefox")},{name:"Safari",versionRegexes:[un,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(nn(n,"safari")||nn(n,"mobile/"))&&nn(n,"applewebkit")}}],ln=[{name:"Windows",search:cn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return nn(n,"iphone")||nn(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:cn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:cn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:cn("linux"),versionRegexes:[]},{name:"Solaris",search:cn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:cn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:cn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],fn={browsers:t(an),oses:t(ln)},sn="Firefox",dn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isEdge:r("Edge"),isChrome:r("Chrome"),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(sn),isSafari:r("Safari")}},mn=function(){return dn({current:void 0,version:J()})},pn=dn,gn=(t("Edge"),t("Chrome"),t("IE"),t("Opera"),t(sn),t("Safari"),"Windows"),hn="Android",vn="Solaris",bn="FreeBSD",wn="ChromeOS",yn=function(n){var t=n.current,e=n.version,r=function(n){return function(){return t===n}};return{current:t,version:e,isWindows:r(gn),isiOS:r("iOS"),isAndroid:r(hn),isOSX:r("OSX"),isLinux:r("Linux"),isSolaris:r(vn),isFreeBSD:r(bn),isChromeOS:r(wn)}},xn=function(){return yn({current:void 0,version:J()})},Cn=yn,Sn=(t(gn),t("iOS"),t(hn),t("Linux"),t("OSX"),t(vn),t(bn),t(wn),function(n,e){var r,o,u,i,c,a,l,f,s,d,m,p,g=fn.browsers(),h=fn.oses(),v=function(n,t){return Q(n,t).map((function(n){var e=Y(n.versionRegexes,t);return{current:n.name,version:e}}))}(g,n).fold(mn,pn),b=function(n,t){return Q(n,t).map((function(n){var e=Y(n.versionRegexes,t);return{current:n.name,version:e}}))}(h,n).fold(xn,Cn);return{browser:v,os:b,deviceType:(o=v,u=n,i=e,c=(r=b).isiOS()&&!0===/ipad/i.test(u),a=r.isiOS()&&!c,l=r.isiOS()||r.isAndroid(),f=l||i("(pointer:coarse)"),s=c||!a&&l&&i("(min-device-width:768px)"),d=a||l&&!s,m=o.isSafari()&&r.isiOS()&&!1===/safari/i.test(u),p=!d&&!s&&!m,{isiPad:t(c),isiPhone:t(a),isTablet:t(s),isPhone:t(d),isTouch:t(f),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:t(m),isDesktop:t(p)})}}),Tn=function(n){return window.matchMedia(n).matches},Rn=G((function(){return Sn(navigator.userAgent,Tn)})),On=function(){return Rn()},Dn=function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:n}},An={fromHtml:function(n,t){var e=(t||document).createElement("div");if(e.innerHTML=n,!e.hasChildNodes()||1<e.childNodes.length)throw console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return Dn(e.childNodes[0])},fromTag:function(n,t){var e=(t||document).createElement(n);return Dn(e)},fromText:function(n,t){var e=(t||document).createTextNode(n);return Dn(e)},fromDom:Dn,fromPoint:function(n,t,e){return m.from(n.dom.elementFromPoint(t,e)).map(Dn)}},Bn=function(n,t){var e=n.dom;if(1!==e.nodeType)return!1;var r=e;if(void 0!==r.matches)return r.matches(t);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(t);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},En=function(n){return 1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount},Pn=function(n,t){return n.dom===t.dom},In=function(n,t){return On().browser.isIE()?function(n,t){return e=n.dom,r=t.dom,o=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(e.compareDocumentPosition(r)&o);var e,r,o}(n,t):(e=t,(r=n.dom)!==(o=e.dom)&&r.contains(o));var e,r,o},Mn=Bn,kn=Object.keys,Nn=Object.hasOwnProperty,_n=function(n,t){for(var e=kn(n),r=0,o=e.length;r<o;r++){var u=e[r];t(n[u],u)}},zn=function(n,t){return Wn(n,(function(n,e){return{k:e,v:t(n,e)}}))},Wn=function(n,t){var e={};return _n(n,(function(n,r){var o=t(n,r);e[o.k]=o.v})),e},jn=function(t,e){var r,o,u,i,c={};return r=e,i=c,o=function(n,t){i[t]=n},u=n,_n(t,(function(n,t){(r(n,t)?o:u)(n,t)})),c},Fn=function(n,t){return Ln(n,t)?m.from(n[t]):m.none()},Ln=function(n,t){return Nn.call(n,t)},Hn=["tfoot","thead","tbody","colgroup"],qn=function(n,t,e){return{element:n,rowspan:t,colspan:e}},Vn=function(n,t,e){return{element:n,cells:t,section:e}},Un=function(n,t){return{element:n,isNew:t}},$n=function(n,t){return{cells:n,section:t}},Gn=("undefined"!=typeof window||Function("return this;")(),function(n){return n.dom.nodeName.toLowerCase()}),Kn=function(n){return n.dom.nodeType},Xn=function(n){return function(t){return Kn(t)===n}},Yn=function(n){return 8===Kn(n)||"#comment"===Gn(n)},Jn=Xn(1),Qn=Xn(3),Zn=Xn(9),nt=Xn(11),tt=function(n){return An.fromDom(n.dom.ownerDocument)},et=function(n){return Zn(n)?n:tt(n)},rt=function(n){return m.from(n.dom.parentNode).map(An.fromDom)},ot=function(n,t){for(var e=C(t)?t:a,r=n.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var u=r.parentNode,i=An.fromDom(u);if(o.push(i),!0===e(i))break;r=u}return o},ut=function(n){return m.from(n.dom.previousSibling).map(An.fromDom)},it=function(n){return m.from(n.dom.nextSibling).map(An.fromDom)},ct=function(n){return E(n.dom.childNodes,An.fromDom)},at=function(n,t){var e=n.dom.childNodes;return m.from(e[t]).map(An.fromDom)},lt=C(Element.prototype.attachShadow)&&C(Node.prototype.getRootNode),ft=t(lt),st=lt?function(n){return An.fromDom(n.dom.getRootNode())}:et,dt=function(n){return An.fromDom(n.dom.host)},mt=function(n){return x(n.dom.shadowRoot)},pt=function(n){var t=Qn(n)?n.dom.parentNode:n.dom;if(null==t||null===t.ownerDocument)return!1;var e,r,o=t.ownerDocument;return function(n){var t=st(n);return nt(t)?m.some(t):m.none()}(An.fromDom(t)).fold((function(){return o.body.contains(t)}),(e=pt,r=dt,function(n){return e(r(n))}))},gt=function(n){var t=n.dom.body;if(null==t)throw new Error("Body is not available yet");return An.fromDom(t)},ht=function(n,t){var e=[];return P(ct(n),(function(n){t(n)&&(e=e.concat([n])),e=e.concat(ht(n,t))})),e},vt=function(n,t,e){return r=function(n){return Bn(n,t)},I(ot(n,e),r);var r},bt=function(n,t){return e=function(n){return Bn(n,t)},I(ct(n),e);var e},wt=function(n,t){return e=t,o=void 0===(r=n)?document:r.dom,En(o)?[]:E(o.querySelectorAll(e),An.fromDom);var e,r,o};function yt(n,t,e,r,o){return n(e,r)?m.some(e):C(o)&&o(e)?m.none():t(e,r,o)}var xt,Ct,St=function(n,t,e){for(var r=n.dom,o=C(e)?e:a;r.parentNode;){r=r.parentNode;var u=An.fromDom(r);if(t(u))return m.some(u);if(o(u))break}return m.none()},Tt=function(n,t,e){return St(n,(function(n){return Bn(n,t)}),e)},Rt=function(n,t){return e=function(n){return Bn(n,t)},N(n.dom.childNodes,(function(n){return e(An.fromDom(n))})).map(An.fromDom);var e},Ot=function(n,t){return e=t,o=void 0===(r=n)?document:r.dom,En(o)?m.none():m.from(o.querySelector(e)).map(An.fromDom);var e,r,o},Dt=function(n,t,e){return yt(Bn,Tt,n,t,e)},At=function(n,t,e){if(!(h(e)||w(e)||S(e)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",e,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,e+"")},Bt=function(n,t,e){At(n.dom,t,e)},Et=function(n,t){var e=n.dom;_n(t,(function(n,t){At(e,t,n)}))},Pt=function(n,t){var e=n.dom.getAttribute(t);return null===e?void 0:e},It=function(n,t){return m.from(Pt(n,t))},Mt=function(n,t){n.dom.removeAttribute(t)},kt=function(n){return k(n.dom.attributes,(function(n,t){return n[t.name]=t.value,n}),{})},Nt=function(n){return void 0!==n.style&&C(n.style.getPropertyValue)},_t=function(n,t,e){if(!h(e))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",e,":: Element ",n),new Error("CSS value must be a string: "+e);Nt(n)&&n.style.setProperty(t,e)},zt=function(n,t,e){var r=n.dom;_t(r,t,e)},Wt=function(n,t){var e=n.dom;_n(t,(function(n,t){_t(e,t,n)}))},jt=function(n,t){var e=n.dom,r=window.getComputedStyle(e).getPropertyValue(t);return""!==r||pt(n)?r:Ft(e,t)},Ft=function(n,t){return Nt(n)?n.style.getPropertyValue(t):""},Lt=function(n,t){var e=n.dom,r=Ft(e,t);return m.from(r).filter((function(n){return 0<n.length}))},Ht=function(n,t){var e,r,o=n.dom;r=t,Nt(e=o)&&e.style.removeProperty(r),It(n,"style").map(rn).is("")&&Mt(n,"style")},qt=function(n,t,e){return void 0===e&&(e=0),It(n,t).map((function(n){return parseInt(n,10)})).getOr(e)},Vt=function(n,t){return qt(n,t,1)},Ut=function(n){return 1<Vt(n,"colspan")},$t=function(n){return 1<Vt(n,"rowspan")},Gt=function(n,t){return parseInt(jt(n,t),10)},Kt=t(10),Xt=t(10),Yt=function(n,t){return Jt(n,t,l)},Jt=function(n,t,e){return W(ct(n),(function(n){return Bn(n,t)?e(n)?[n]:[]:Jt(n,t,e)}))},Qt=function(n,t){return function(n,t,e){return void 0===e&&(e=a),e(t)?m.none():D(n,Gn(t))?m.some(t):Tt(t,n.join(","),(function(n){return Bn(n,"table")||e(n)}))}(["td","th"],n,t)},Zt=function(n){return Yt(n,"th,td")},ne=function(n){return Bn(n,"colgroup")?bt(n,"col"):W(re(n),(function(n){return bt(n,"col")}))},te=function(n,t){return Dt(n,"table",t)},ee=function(n){return Yt(n,"tr")},re=function(n){return te(n).fold(t([]),(function(n){return bt(n,"colgroup")}))},oe=function(n,t){return E(n,(function(n){if("colgroup"===Gn(n)){var e=E(ne(n),(function(n){var t=qt(n,"span",1);return qn(n,1,t)}));return Vn(n,e,"colgroup")}return e=E(Zt(n),(function(n){var t=qt(n,"rowspan",1),e=qt(n,"colspan",1);return qn(n,t,e)})),Vn(n,e,t(n))}))},ue=function(n){return rt(n).map((function(n){var t=Gn(n);return D(Hn,t)?t:"tbody"})).getOr("tbody")},ie=function(n){var t=ee(n),e=U(re(n),t);return oe(e,ue)},ce=function(n,t){return n+","+t},ae=function(n,t){var e=W(n.all,(function(n){return n.cells}));return I(e,t)},le=function(n){var t={},e=[],r={},o=0,u=0,i=0;return P(n,(function(n){var c,a,l;"colgroup"===n.section?(a={},l=0,P(n.cells,(function(n){var t=n.colspan;B(t,(function(e){var r=l+e;a[r]={element:n.element,colspan:t,column:r}})),l+=t})),r=a):(c=[],P(n.cells,(function(n){for(var e=0;void 0!==t[ce(i,e)];)e++;for(var r={element:n.element,rowspan:n.rowspan,colspan:n.colspan,row:i,column:e},o=0;o<n.colspan;o++)for(var a=0;a<n.rowspan;a++){var l=e+o,f=ce(i+a,l);t[f]=r,u=Math.max(u,l+1)}c.push(r)})),o++,e.push(Vn(n.element,c,n.section)),i++)})),{grid:{rows:o,columns:u},access:t,all:e,columns:r}},fe=function(n){var t=ie(n);return le(t)},se=le,de=function(n,t,e){var r=n.access[ce(t,e)];return void 0!==r?m.some(r):m.none()},me=function(n,t,e){var r=ae(n,(function(n){return e(t,n.element)}));return 0<r.length?m.some(r[0]):m.none()},pe=ae,ge=function(n){return W(n.all,(function(n){return n.cells}))},he=function(n){return function(n){return t=[],_n(n,(function(n,e){t.push(n)})),t;var t}(n.columns)},ve=function(n){return 0<kn(n.columns).length},be=function(n,t){return m.from(n.columns[t])},we=function(n,t){var e=t.column,r=t.column+t.colspan-1,o=t.row,u=t.row+t.rowspan-1;return e<=n.finishCol&&r>=n.startCol&&o<=n.finishRow&&u>=n.startRow},ye=function(n,t){return t.column>=n.startCol&&t.column+t.colspan-1<=n.finishCol&&t.row>=n.startRow&&t.row+t.rowspan-1<=n.finishRow},xe=function(n,t,e){var r=me(n,t,Pn),o=me(n,e,Pn);return r.bind((function(n){return o.map((function(t){return e=n,r=t,{startRow:Math.min(e.row,r.row),startCol:Math.min(e.column,r.column),finishRow:Math.max(e.row+e.rowspan-1,r.row+r.rowspan-1),finishCol:Math.max(e.column+e.colspan-1,r.column+r.colspan-1)};var e,r}))}))},Ce=function(n,t,e){return xe(n,t,e).map((function(t){var e=pe(n,r(we,t));return E(e,(function(n){return n.element}))}))},Se=function(n,t){return me(n,t,(function(n,t){return In(t,n)})).map((function(n){return n.element}))},Te=function(n,t,e,r,o){var u=Re(n),i=Pn(n,e)?m.some(t):Se(u,t),c=Pn(n,o)?m.some(r):Se(u,r);return i.bind((function(n){return c.bind((function(t){return Ce(u,n,t)}))}))},Re=fe,Oe=function(n,t){rt(n).each((function(e){e.dom.insertBefore(t.dom,n.dom)}))},De=function(n,t){it(n).fold((function(){rt(n).each((function(n){Be(n,t)}))}),(function(n){Oe(n,t)}))},Ae=function(n,t){at(n,0).fold((function(){Be(n,t)}),(function(e){n.dom.insertBefore(t.dom,e.dom)}))},Be=function(n,t){n.dom.appendChild(t.dom)},Ee=function(n,t){Oe(n,t),Be(t,n)},Pe=function(n,t){P(t,(function(e,r){var o=0===r?n:t[r-1];De(o,e)}))},Ie=function(n,t){P(t,(function(t){Be(n,t)}))},Me=function(n){n.dom.textContent="",P(ct(n),(function(n){ke(n)}))},ke=function(n){var t=n.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Ne=function(n){var t,e=ct(n);0<e.length&&(t=n,P(e,(function(n){Oe(t,n)}))),ke(n)},_e=(xt=Qn,"text",{get:function(n){if(!xt(n))throw new Error("Can only get text value of a text node");return Ct(n).getOr("")},getOption:Ct=function(n){return xt(n)?m.from(n.dom.nodeValue):m.none()},set:function(n,t){if(!xt(n))throw new Error("Can only set raw text value of a text node");n.dom.nodeValue=t}}),ze=function(n){return _e.get(n)},We=function(n){return _e.getOption(n)},je=function(n,t){return _e.set(n,t)},Fe=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Le(){return{up:t({selector:Tt,closest:Dt,predicate:St,all:ot}),down:t({selector:wt,predicate:ht}),styles:t({get:jt,getRaw:Lt,set:zt,remove:Ht}),attrs:t({get:Pt,set:Bt,remove:Mt,copyTo:function(n,t){var e=kt(n);Et(t,e)}}),insert:t({before:Oe,after:De,afterAll:Pe,append:Be,appendAll:Ie,prepend:Ae,wrap:Ee}),remove:t({unwrap:Ne,remove:ke}),create:t({nu:An.fromTag,clone:function(n){return An.fromDom(n.dom.cloneNode(!1))},text:An.fromText}),query:t({comparePosition:function(n,t){return n.dom.compareDocumentPosition(t.dom)},prevSibling:ut,nextSibling:it}),property:t({children:ct,name:Gn,parent:rt,document:function(n){return et(n).dom},isText:Qn,isComment:Yn,isElement:Jn,getText:ze,setText:je,isBoundary:function(n){return!!Jn(n)&&("body"===Gn(n)||D(Fe,Gn(n)))},isEmptyTag:function(n){return!!Jn(n)&&D(["br","img","hr","input"],Gn(n))},isNonEditable:function(n){return Jn(n)&&"false"===Pt(n,"contenteditable")}}),eq:Pn,is:Mn}}var He=function(n,t,e){return t.bind((function(t){return e.filter(r(n.eq,t))}))},qe=function(n,t,e){return 0<e.length?function(n,t,e,r){var o=t(n,e);return M(r,(function(e,r){var o=t(n,r);return He(n,e,o)}),o)}(n,t,(r=e)[0],r.slice(1)):m.none();var r},Ve=function(n,t,e,o){void 0===o&&(o=a);var u=[t].concat(n.up().all(t)),i=[e].concat(n.up().all(e)),c=function(n){return _(n,o).fold((function(){return n}),(function(t){return n.slice(0,t+1)}))},l=c(u),f=c(i),s=N(l,(function(t){return A(f,(e=t,r(n.eq,e)));var e}));return{firstpath:l,secondpath:f,shared:s}},Ue=Le(),$e=function(n,t){return qe(Ue,(function(t,e){return n(e)}),t)},Ge=function(n){return Tt(n,"table")},Ke=function(n,t,e){var r=function(n){return function(t){return void 0!==e&&e(t)||Pn(t,n)}};return Pn(n,t)?m.some({boxes:m.some([n]),start:n,finish:t}):Ge(n).bind((function(o){return Ge(t).bind((function(u){if(Pn(o,u))return m.some({boxes:(l=n,f=t,s=Re(o),Ce(s,l,f)),start:n,finish:t});if(In(o,u)){var i=0<(c=vt(t,"td,th",r(o))).length?c[c.length-1]:t;return m.some({boxes:Te(o,n,o,t,u),start:n,finish:i})}if(In(u,o)){var c,a=0<(c=vt(n,"td,th",r(u))).length?c[c.length-1]:n;return m.some({boxes:Te(u,n,o,t,u),start:n,finish:a})}return Ve(Ue,n,t,undefined).shared.bind((function(i){return Dt(i,"table",e).bind((function(e){var i=vt(t,"td,th",r(e)),c=0<i.length?i[i.length-1]:t,a=vt(n,"td,th",r(e)),l=0<a.length?a[a.length-1]:n;return m.some({boxes:Te(e,n,o,t,u),start:l,finish:c})}))}));var l,f,s}))}))},Xe=function(n,t){var e=wt(n,t);return 0<e.length?m.some(e):m.none()},Ye=function(n,t,e){return Ot(n,t).bind((function(t){return Ot(n,e).bind((function(n){return $e(Ge,[t,n]).map((function(e){return{first:t,last:n,table:e}}))}))}))},Je=function(n,t,e,r,o){return u=o,N(n,(function(n){return Bn(n,u)})).bind((function(n){return function(n,t,e){return te(n).bind((function(r){var o,u,i,c=Re(r);return u=t,i=e,me(o=c,n,Pn).bind((function(n){var t=0<u?n.row+n.rowspan-1:n.row,e=0<i?n.column+n.colspan-1:n.column;return de(o,t+u,e+i).map((function(n){return n.element}))}))}))}(n,t,e).bind((function(n){return e=r,Tt(t=n,"table").bind((function(n){return Ot(n,e).bind((function(n){return Ke(n,t).bind((function(n){return n.boxes.map((function(t){return{boxes:t,start:n.start,finish:n.finish}}))}))}))}));var t,e}))}));var u},Qe=Xe,Ze=function(n,t,e){return Ye(n,t,e).bind((function(t){var e=function(t){return Pn(n,t)},o="thead,tfoot,tbody,table",u=Tt(t.first,o,e),i=Tt(t.last,o,e);return u.bind((function(n){return i.bind((function(e){return Pn(n,e)?(o=t.table,u=t.first,i=t.last,function(n,t,e){return xe(n,t,e).bind((function(t){return function(n,t){for(var e=!0,o=r(ye,t),u=t.startRow;u<=t.finishRow;u++)for(var i=t.startCol;i<=t.finishCol;i++)e=e&&de(n,u,i).exists(o);return e?m.some(t):m.none()}(n,t)}))}(Re(o),u,i)):m.none();var o,u,i}))}))}))},nr=function(n){if(!b(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],e={};return P(n,(function(r,o){var u=kn(r);if(1!==u.length)throw new Error("one and only one name per case");var i=u[0],c=r[i];if(void 0!==e[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!b(c))throw new Error("case arguments must be an array");t.push(i),e[i]=function(){var e=arguments.length;if(e!==c.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+e);for(var r=new Array(e),u=0;u<r.length;u++)r[u]=arguments[u];return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);return arguments[o].apply(null,r)},match:function(n){var e=kn(n);if(t.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+e.join(","));if(!j(t,(function(n){return D(e,n)})))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+t.join(", "));return n[i].apply(null,r)},log:function(n){console.log(n,{constructors:t,constructor:i,params:r})}}}})),e},tr=nr([{none:[]},{multiple:["elements"]},{single:["element"]}]),er=function(n,t,e,r){return n.fold(t,e,r)},rr=tr.none,or=tr.multiple,ur=tr.single,ir=tinymce.util.Tools.resolve("tinymce.PluginManager"),cr=function(n,t){var e,r,o,u,i,c,a,l,f,s,d=function(n){return Bn(n.element,t)},m=ie(n),p=se(m),g=(r=d,o=(e=p).grid.columns,u=e.grid.rows,i=o,a=c=0,_n(e.access,(function(n){var t,e,o,l;r(n)&&(e=(t=n.row)+n.rowspan-1,l=(o=n.column)+n.colspan-1,t<u?u=t:c<e&&(c=e),o<i?i=o:a<l&&(a=l))})),{minRow:u,minCol:i,maxRow:c,maxCol:a}),h="th:not("+t+"),td:not("+t+")",v=Jt(n,"th,td",(function(n){return Bn(n,h)}));return P(v,ke),function(n,t,e,r){for(var o,u,i,c=t.grid.columns,a=t.grid.rows,l=0;l<a;l++)for(var f=!1,s=0;s<c;s++)l<e.minRow||l>e.maxRow||s<e.minCol||s>e.maxCol||(de(t,l,s).filter(r).isNone()?(o=f,u=n[l].element,i=An.fromTag("td"),Be(i,An.fromTag("br")),(o?Be:Ae)(u,i)):f=!0)}(m,p,g,d),f=g,s=I(Yt(l=n,"tr"),(function(n){return 0===n.dom.childElementCount})),P(s,ke),f.minCol!==f.maxCol&&f.minRow!==f.maxRow||P(Yt(l,"th,td"),(function(n){Mt(n,"rowspan"),Mt(n,"colspan")})),Mt(l,"width"),Mt(l,"height"),Ht(l,"width"),Ht(l,"height"),n},ar=function(n){return"img"===Gn(n)?1:We(n).fold((function(){return ct(n).length}),(function(n){return n.length}))},lr=["img","br"],fr=function(n){return We(n).filter((function(n){return 0!==n.trim().length||-1<n.indexOf(" ")})).isSome()||D(lr,Gn(n))},sr=function(n){return t=fr,(e=function(n){for(var r=0;r<n.childNodes.length;r++){var o=An.fromDom(n.childNodes[r]);if(t(o))return m.some(o);var u=e(n.childNodes[r]);if(u.isSome())return u}return m.none()})(n.dom);var t,e},dr=function(n){return mr(n,fr)},mr=function(n,t){var e=function(n){for(var r=ct(n),o=r.length-1;0<=o;o--){var u=r[o];if(t(u))return m.some(u);var i=e(u);if(i.isSome())return i}return m.none()};return e(n)},pr=function(n,t){return An.fromDom(n.dom.cloneNode(t))},gr=function(n){return pr(n,!1)},hr=function(n){return pr(n,!0)},vr={scope:["row","col"]},br=function(){var n=An.fromTag("td");return Be(n,An.fromTag("br")),n},wr=function(){return An.fromTag("col")},yr=function(){return An.fromTag("colgroup")},xr=function(n,t,e){var r=function(n,t){var e,r,o,u=(e=n,r=An.fromTag(t),o=kt(e),Et(r,o),r),i=ct(hr(n));return Ie(u,i),u}(n,t);return _n(e,(function(n,t){null===n?Mt(r,t):Bt(r,t,n)})),r},Cr=function(n){return n},Sr=function(n){return function(){return An.fromTag("tr",n.dom)}},Tr=function(n,t,e){var r=function(n,t){var e,r,o;e=t,r=n.element.dom,o=e.dom,Nt(r)&&Nt(o)&&(o.style.cssText=r.style.cssText),Ht(t,"height"),1!==n.colspan&&Ht(n.element,"width")};return{col:function(t){var e=tt(t.element),o=An.fromTag(Gn(t.element),e.dom);return r(t,o),n(t.element,o),o},colgroup:yr,row:Sr(t),cell:function(t){var o,u,i,c,a,l=tt(t.element),f=An.fromTag(Gn(t.element),l.dom),s=e.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),d=0<s.length?(o=t.element,u=f,i=s,sr(o).map((function(n){var t=i.join(","),e=vt(n,t,(function(n){return Pn(n,o)}));return M(e,(function(n,t){var e=gr(t);return Mt(e,"contenteditable"),Be(n,e),e}),u)})).getOr(u)):f;return Be(d,An.fromTag("br")),r(t,f),c=t.element,a=f,_n(vr,(function(n,t){return It(c,t).filter((function(t){return D(n,t)})).each((function(n){return Bt(a,t,n)}))})),n(t.element,f),f},replace:xr,gap:br}},Rr=function(n){return{col:wr,colgroup:yr,row:Sr(n),cell:br,replace:Cr,gap:br}},Or=function(n){return E(n,An.fromDom)},Dr=function(n){return er(n.get(),t([]),e,F)},Ar={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Br=function(n){return{element:n,mergable:m.none(),unmergable:m.none(),selection:[n]}},Er=function(n,t,e){return{element:e,mergable:(u=t,i=Ar,er(n.get(),m.none,(function(n){return n.length<=1?m.none():Ze(u,i.firstSelectedSelector,i.lastSelectedSelector).map((function(t){return{bounds:t,cells:n}}))}),m.none)),unmergable:(r=function(n,t){return It(n,t).exists((function(n){return 1<parseInt(n,10)}))},0<(o=Dr(n)).length&&j(o,(function(n){return r(n,"rowspan")||r(n,"colspan")}))?m.some(o):m.none()),selection:Dr(n)};var r,o,u,i},Pr=nr([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ir=V({},Pr),Mr=function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t};function kr(n,t){var e=function(e){var r=t(e);if(r<=0||null===r){var o=jt(e,n);return parseFloat(o)||0}return r},r=function(n,t){return k(t,(function(t,e){var r=jt(n,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?t:t+o}),0)};return{set:function(t,e){if(!S(e)&&!e.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+e);var r=t.dom;Nt(r)&&(r.style[n]=e+"px")},get:e,getOuter:e,aggregate:r,max:function(n,t,e){var o=r(n,e);return o<t?t-o:0}}}var Nr,_r,zr,Wr,jr=kr("width",(function(n){return n.dom.offsetWidth})),Fr=function(n){return jr.get(n)},Lr=function(n){return jr.getOuter(n)},Hr=function(n){var t=n.grid,r=B(t.columns,e),o=B(t.rows,e);return E(r,(function(t){return qr((function(){return W(o,(function(e){return de(n,e,t).filter((function(n){return n.column===t})).toArray()}))}),(function(n){return 1===n.colspan}),(function(){return de(n,0,t)}))}))},qr=function(n,t,e){var r=n();return N(r,t).orThunk((function(){return m.from(r[0]).orThunk(e)})).map((function(n){return n.element}))},Vr=function(n){var r=n.grid,o=B(r.rows,e),u=B(r.columns,e);return E(o,(function(e){return qr((function(){return W(u,(function(r){return de(n,e,r).filter((function(n){return n.row===e})).fold(t([]),(function(n){return[n]}))}))}),(function(n){return 1===n.rowspan}),(function(){return de(n,e,0)}))}))},Ur=function(n,t){return function(e){return"rtl"===$r(e)?t:n}},$r=function(n){return"rtl"===jt(n,"direction")?"rtl":"ltr"},Gr=kr("height",(function(n){var t=n.dom;return pt(n)?t.getBoundingClientRect().height:t.offsetHeight})),Kr=function(n){return Gr.get(n)},Xr=function(n){return Gr.getOuter(n)},Yr=function(n,t){return{left:n,top:t,translate:function(e,r){return Yr(n+e,t+r)}}},Jr=Yr,Qr=function(n,t){return void 0!==n?n:void 0!==t?t:0},Zr=function(n){var t=n.dom.ownerDocument,e=t.body,r=t.defaultView,o=t.documentElement;if(e===n.dom)return Jr(e.offsetLeft,e.offsetTop);var u=Qr(null==r?void 0:r.pageYOffset,o.scrollTop),i=Qr(null==r?void 0:r.pageXOffset,o.scrollLeft),c=Qr(o.clientTop,e.clientTop),a=Qr(o.clientLeft,e.clientLeft);return no(n).translate(i-a,u-c)},no=function(n){var t,e=n.dom,r=e.ownerDocument.body;return r===e?Jr(r.offsetLeft,r.offsetTop):pt(n)?(t=e.getBoundingClientRect(),Jr(t.left,t.top)):Jr(0,0)},to=function(n,t){return{row:n,y:t}},eo=function(n,t){return{col:n,x:t}},ro=function(n){return Zr(n).left+Lr(n)},oo=function(n){return Zr(n).left},uo=function(n,t){return eo(n,oo(t))},io=function(n,t){return eo(n,ro(t))},co=function(n){return Zr(n).top},ao=function(n,t){return to(n,co(t))},lo=function(n,t){return to(n,co(t)+Xr(t))},fo=function(n,t,e){if(0===e.length)return[];var r=E(e.slice(1),(function(t,e){return t.map((function(t){return n(e,t)}))})),o=e[e.length-1].map((function(n){return t(e.length-1,n)}));return r.concat([o])},so={delta:e,positions:function(n){return fo(ao,lo,n)},edge:co},mo=Ur({delta:e,edge:oo,positions:function(n){return fo(uo,io,n)}},{delta:function(n){return-n},edge:ro,positions:function(n){return fo(io,uo,n)}}),po={delta:function(n,t){return mo(t).delta(n,t)},positions:function(n,t){return mo(t).positions(n,t)},edge:function(n){return mo(n).edge(n)}},go={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ho=(_r="[eE][+-]?[0-9]+",Wr=["Infinity",(Nr="[0-9]+")+"\\."+(zr=function(n){return"(?:"+n+")?"})(Nr)+zr(_r),"\\."+Nr+zr(_r),Nr+zr(_r)].join("|"),new RegExp("^([+-]?(?:"+Wr+"))(.*)$")),vo=function(){var n=On().browser;return n.isIE()||n.isEdge()},bo=function(n,t,e){return r=jt(n,t),o=e,u=parseFloat(r),isNaN(u)?o:u;var r,o,u},wo=function(n){return vo()?(e=(t=n).dom.getBoundingClientRect().width,"border-box"===jt(t,"box-sizing")?e:e-bo(t,"padding-left",0)-bo(t,"padding-right",0)-(bo(t,"border-left-width",0)+bo(t,"border-right-width",0))):bo(n,"width",Fr(n));var t,e},yo=/(\d+(\.\d+)?)%/,xo=/(\d+(\.\d+)?)px|em/,Co=function(n,t){zt(n,"width",t+"px")},So=function(n,t){zt(n,"width",t+"%")},To=function(n,t){zt(n,"height",t+"px")},Ro=function(n){var t,e=Lt(t=n,"height").getOrThunk((function(){return function(n){return vo()?(e=(t=n).dom.getBoundingClientRect().height,"border-box"===jt(t,"box-sizing")?e:e-bo(t,"padding-top",0)-bo(t,"padding-bottom",0)-(bo(t,"border-top-width",0)+bo(t,"border-bottom-width",0))):bo(n,"height",Kr(n));var t,e}(t)+"px"}));return e?function(n,t,e,r){var o,u,i,c,a,l=parseInt(n,10);return en(n,"%")&&"table"!==Gn(t)?(u=l,i=e,c=r,a=te(o=t).map((function(n){var t=i(n);return Math.floor(u/100*t)})).getOr(u),c(o,a),a):l}(e,n,Kr,To):Kr(n)},Oo=function(n){return Lt(n,"width").fold((function(){return m.from(Pt(n,"width"))}),(function(n){return m.some(n)}))},Do=function(n,t){return n/t.pixelWidth()*100},Ao=function(n,t){return Oo(n).fold((function(){var e=Fr(n);return Do(e,t)}),(function(e){return function(n,t,e){var r=yo.exec(t);if(null!==r)return parseFloat(r[1]);var o=wo(n);return Do(o,e)}(n,e,t)}))},Bo=function(n,t){return Oo(n).fold((function(){return wo(n)}),(function(e){return function(n,t,e){var r=xo.exec(t);if(null!==r)return parseInt(r[1],10);var o=yo.exec(t);return null===o?wo(n):parseFloat(o[1])/100*e.pixelWidth()}(n,e,t)}))},Eo=function(n){return"rowspan",Ro(t=n)/Vt(t,"rowspan");var t},Po=function(n,t,e){zt(n,"width",t+e)},Io=function(n){return function(n,t){var e,r=(e=n,m.from(e.dom.offsetParent).map(An.fromDom).getOr(gt(tt(n))));return t(n)/t(r)*100}(n,Fr)+"%"},Mo=t(yo),ko=t(xo),No=("col",function(n){return Jn(n)&&"col"===Gn(n)}),_o=function(n,t,e){return Lt(n,t).fold((function(){return e(n)+"px"}),(function(n){return n}))},zo=function(n,t){return _o(n,"width",(function(n){return No(n)?Fr(n):Bo(n,t)}))},Wo=function(n){return _o(n,"height",Eo)},jo=function(n,t,e,r,o,u){return n.filter(r).fold((function(){return u(function(n,t){if(t<0||t>=n.length-1)return m.none();var e=n[t].fold((function(){var e,r,o=(e=n.slice(0,t),(r=T.call(e,0)).reverse(),r);return q(o,(function(n,t){return n.map((function(n){return{value:n,delta:t+1}}))}))}),(function(n){return m.some({value:n,delta:0})})),r=n[t+1].fold((function(){var e=n.slice(t+1);return q(e,(function(n,t){return n.map((function(n){return{value:n,delta:t+1}}))}))}),(function(n){return m.some({value:n,delta:1})}));return e.bind((function(n){return r.map((function(t){var e=t.delta+n.delta;return Math.abs(t.value-n.value)/e}))}))}(e,t))}),(function(n){return o(n)}))},Fo=function(n,t,r,o,u){var i=Hr(n),a=ve(n)?E(he(n),(function(n){return m.from(n.element)})):i,l=[m.some(po.edge(t))].concat(E(po.positions(i,t),(function(n){return n.map((function(n){return n.x}))}))),f=c(Ut);return E(a,(function(n,t){return jo(n,t,l,f,(function(n){if(!No(a=n)||Lt(a,"width").isSome())return r(n,u);var c,a,s=null!=(c=i[t])?e(c):m.none();return jo(s,t,l,f,(function(n){return o(m.some(Fr(n)))}),o)}),o)}))},Lo=function(n){return n.map((function(n){return n+"px"})).getOr("")},Ho=function(n,t,e){return Fo(n,t,Bo,(function(n){return n.getOrThunk(e.minCellWidth)}),e)},qo=function(n,t,e,r,o){var u=Vr(n),i=[m.some(e.edge(t))].concat(E(e.positions(u,t),(function(n){return n.map((function(n){return n.y}))})));return E(u,(function(n,t){return jo(n,t,i,c($t),r,o)}))},Vo=function(n,t,e){for(var r=0,o=n;o<t;o++)r+=void 0!==e[o]?e[o]:0;return r},Uo=function(n,t,e){var r=function(n,t){return ve(n)?(o=t,u=he(n),E(u,(function(n,t){return{element:n.element,width:o[t],colspan:n.colspan}}))):(e=t,r=ge(n),E(r,(function(n){var t=Vo(n.column,n.column+n.colspan,e);return{element:n.element,width:t,colspan:n.colspan}})));var e,r,o,u}(n,t);P(r,(function(n){e.setElementWidth(n.element,n.width)}))},$o=function(n,e,r,o,u){var i=fe(n),c=u.getCellDelta(e),a=u.getWidths(i,u),l=r===i.grid.columns-1,f=o.clampTableDelta(a,r,c,u.minCellWidth(),l),s=function(n,e,r,o,u){var i,c,a=n.slice(0),l=(c=e,0===(i=n).length?Ir.none():1===i.length?Ir.only(0):0===c?Ir.left(0,1):c===i.length-1?Ir.right(c-1,c):0<c&&c<i.length-1?Ir.middle(c-1,c,c+1):Ir.none()),f=t(E(a,t(0)));return l.fold(f,(function(n){return o.singleColumnWidth(a[n],r)}),(function(n,t){return u.calcLeftEdgeDeltas(a,n,t,r,o.minCellWidth(),o.isRelative)}),(function(n,t,e){return u.calcMiddleDeltas(a,n,t,e,r,o.minCellWidth(),o.isRelative)}),(function(n,t){return u.calcRightEdgeDeltas(a,n,t,r,o.minCellWidth(),o.isRelative)}))}(a,r,f,u,o),d=E(s,(function(n,t){return n+a[t]}));Uo(i,d,u),o.resizeTable(u.adjustTableWidth,f,l)},Go=function(n){return E(n,t(0))},Ko=function(n,t,e,r,o){return o(n.slice(0,t)).concat(r).concat(o(n.slice(e)))},Xo=function(n){return function(t,e,r,o){if(n(r)){var u=Math.max(o,t[e]-Math.abs(r)),i=Math.abs(u-t[e]);return 0<=r?i:-i}return r}},Yo=Xo((function(n){return n<0})),Jo=Xo(l),Qo=function(n,e){var r=m.from(n.dom.documentElement).map(An.fromDom).getOr(n);return{parent:t(r),view:t(n),origin:t(Jr(0,0)),isResizable:e}},Zo=nr([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),nu=function(n,t,e){var r=e.substring(0,e.length-n.length),o=parseFloat(r);return r===o.toString()?t(o):Zo.invalid(e)},tu=V(V({},Zo),{from:function(n){return en(n,"%")?nu("%",Zo.percent,n):en(n,"px")?nu("px",Zo.pixels,n):Zo.invalid(n)}}),eu=function(n,e,r){var o,u,i,c=tu.from(r),a=j(n,(function(n){return"0px"===n}))?(o=c,u=n.length,i=o.fold((function(){return t("")}),(function(n){return t(n/u+"px")}),(function(){return t(100/u+"%")})),B(u,i)):function(n,t,e){return n.fold((function(){return t}),(function(n){return o=(r=n)/e,E(t,(function(n){return tu.from(n).fold((function(){return n}),(function(n){return n*o+"px"}),(function(n){return n/100*r+"px"}))}));var r,o}),(function(n){return r=e,E(t,(function(n){return tu.from(n).fold((function(){return n}),(function(n){return n/r*100+"%"}),(function(n){return n+"%"}))}));var r}))}(c,n,e);return ou(a)},ru=function(n,r){return 0===n.length?r:M(n,(function(n,r){return tu.from(r).fold(t(0),e,e)+n}),0)},ou=function(n){if(0===n.length)return n;var e,r,o=M(n,(function(n,t){var e=tu.from(t).fold((function(){return{value:t,remainder:0}}),(function(n){return t=n,"px",{value:(e=Math.floor(t))+"px",remainder:t-e};var t,e}),(function(n){return{value:n+"%",remainder:0}}));return{output:[e.value].concat(n.output),remainder:n.remainder+e.remainder}}),{output:[],remainder:0}),u=o.output;return u.slice(0,u.length-1).concat([(e=u[u.length-1],r=Math.round(o.remainder),tu.from(e).fold(t(e),(function(n){return n+r+"px"}),(function(n){return n+r+"%"})))])},uu=tu.from,iu=function(n){return uu(n).fold(t("px"),t("px"),t("%"))},cu=function(n,t,e,r){var o=fe(n),u=o.all,i=ge(o),c=he(o);t.each((function(t){var e,u,a,l,f=iu(t),s=Fr(n),d=Fo(o,n,zo,Lo,r),m=eu(d,s,t);ve(o)?(a=m,l=f,P(c,(function(n,t){var e=ru([a[t]],Kt());zt(n.element,"width",e+l)}))):(e=m,u=f,P(i,(function(n){var t=e.slice(n.column,n.colspan+n.column),r=ru(t,Kt());zt(n.element,"width",r+u)}))),zt(n,"width",t)})),e.each((function(t){var e,r,c,a=iu(t),l=Kr(n),f=qo(o,n,so,Wo,Lo),s=eu(f,l,t);e=s,r=u,c=a,P(i,(function(n){var t=e.slice(n.row,n.rowspan+n.row),r=ru(t,Xt());zt(n.element,"height",r+c)})),P(r,(function(n,t){zt(n.element,"height",e[t])})),zt(n,"height",t)}))},au=function(n){return Oo(n).exists((function(n){return yo.test(n)}))},lu=function(n){return Oo(n).exists((function(n){return xo.test(n)}))},fu=function(n){return Oo(n).isNone()},su=Io,du=function(n){return fe(n).grid},mu=function(n){var t=[];return{bind:function(n){if(void 0===n)throw new Error("Event bind error: undefined handler");t.push(n)},unbind:function(n){t=I(t,(function(t){return t!==n}))},trigger:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o={};P(n,(function(n,t){o[n]=e[t]})),P(t,(function(n){n(o)}))}}},pu=function(n){return{registry:zn(n,(function(n){return{bind:n.bind,unbind:n.unbind}})),trigger:zn(n,(function(n){return n.trigger}))}},gu=function(n){return n.slice(0).sort()},hu=function(n,t){var e=I(t,(function(t){return!D(n,t)}));0<e.length&&function(n){throw new Error("Unsupported keys for object: "+gu(n).join(", "))}(e)},vu=function(n){return function(n,t,e){if(0===t.length)throw new Error("You must specify at least one required field.");var r;return function(n,t){if(!b(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");P(t,(function(t){if(!h(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.")}))}("required",t),r=gu(t),N(r,(function(n,t){return t<r.length-1&&n===r[t+1]})).each((function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+r.join(", ")+"].")})),function(r){var o=kn(r);j(t,(function(n){return D(o,n)}))||function(n,t){throw new Error("All required keys ("+gu(n).join(", ")+") were not specified. Specified keys were: "+gu(t).join(", ")+".")}(t,o),n(t,o);var u=I(t,(function(n){return!e.validate(r[n],n)}));return 0<u.length&&function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+gu(n).join(", ")+") were not.")}(u,e.label),r}}(hu,n,{validate:C,label:"function"})},bu=vu(["compare","extract","mutate","sink"]),wu=vu(["element","start","stop","destroy"]),yu=vu(["forceDrop","drop","move","delayDrop"]);function xu(){var t={onEvent:n,reset:n},e=function(){var n=m.none(),t=pu({move:mu(["info"])});return{onEvent:function(e,r){r.extract(e).each((function(e){var o,u,i;(o=r,u=e,i=n.map((function(n){return o.compare(n,u)})),n=m.some(u),i).each((function(n){t.trigger.move(n)}))}))},reset:function(){n=m.none()},events:t.registry}}(),r=t;return{on:function(){r.reset(),r=e},off:function(){r.reset(),r=t},isOn:function(){return r===e},onEvent:function(n,t){r.onEvent(n,t)},events:e.events}}var Cu=function(n){var t,e,r=An.fromDom(function(n){if(ft()&&x(n.target)){var t=An.fromDom(n.target);if(Jn(t)&&mt(t)&&n.composed&&n.composedPath){var e=n.composedPath();if(e)return L(e,0)}}return m.from(n.target)}(n).getOr(n.target)),o=function(){return n.stopPropagation()},u=function(){return n.preventDefault()},i=(t=u,e=o,function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))});return{target:r,x:n.clientX,y:n.clientY,stop:o,prevent:u,kill:i,raw:n}},Su=function(n,t,e,r){n.dom.removeEventListener(t,e,r)},Tu=l,Ru=function(n,t,e){return function(n,t,e,o,u){var i,c,a=(i=e,c=o,function(n){i(n)&&c(Cu(n))});return n.dom.addEventListener(t,a,u),{unbind:r(Su,n,t,a,u)}}(n,t,Tu,e,!1)},Ou=Cu,Du=function(n,t){var e=Pt(n,t);return void 0===e||""===e?[]:e.split(" ")},Au=function(n){return void 0!==n.dom.classList},Bu=function(n,t){Au(n)?n.dom.classList.add(t):function(n,t){return r=t,o=Du(e=n,"class").concat([r]),Bt(e,"class",o.join(" ")),!0;var e,r,o}(n,t)},Eu=function(n,t){return Au(n)&&n.dom.classList.contains(t)},Pu=function(n){var t=n.replace(/\./g,"-");return{resolve:function(n){return t+"-"+n}}},Iu=Pu("ephox-dragster").resolve,Mu=bu({compare:function(n,t){return Jr(t.left-n.left,t.top-n.top)},extract:function(n){return m.some(Jr(n.x,n.y))},sink:function(n,t){var e=function(n){var t=V({layerClass:Iu("blocker")},n),e=An.fromTag("div");return Bt(e,"role","presentation"),Wt(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Bu(e,Iu("blocker")),Bu(e,t.layerClass),{element:function(){return e},destroy:function(){ke(e)}}}(t),r=Ru(e.element(),"mousedown",n.forceDrop),o=Ru(e.element(),"mouseup",n.drop),u=Ru(e.element(),"mousemove",n.move),i=Ru(e.element(),"mouseout",n.delayDrop);return wu({element:e.element,start:function(n){Be(n,e.element())},stop:function(){ke(e.element())},destroy:function(){e.destroy(),o.unbind(),u.unbind(),i.unbind(),r.unbind()}})},mutate:function(n,t){n.mutate(t.left,t.top)}}),ku=function(n){return"true"===Pt(n,"contenteditable")},Nu=Pu("ephox-snooker").resolve,_u=Nu("resizer-bar"),zu=Nu("resizer-rows"),Wu=Nu("resizer-cols"),ju=function(n){var t=wt(n.parent(),"."+_u);P(t,ke)},Fu=function(n,t,e){var r=n.origin();P(t,(function(t){t.each((function(t){var o=e(r,t);Bu(o,_u),Be(n.parent(),o)}))}))},Lu=function(n,t,e,r,o){var u,i=Zr(e),c=t.isResizable,a=0<r.length?so.positions(r,e):[],l=0<a.length?(u=c,W(n.all,(function(n,t){return u(n.element)?[t]:[]}))):[];!function(n,t,e,r){Fu(n,t,(function(n,t){var o,u,i,c,a,l=(o=t.row,u=e.left-n.left,i=t.y-n.top,c=r,a=An.fromTag("div"),Wt(a,{position:"absolute",left:u+"px",top:i-3.5+"px",height:"7px",width:c+"px"}),Et(a,{"data-row":o,role:"presentation"}),a);return Bu(l,zu),l}))}(t,I(a,(function(n,t){return A(l,(function(n){return t===n}))})),i,Lr(e));var f,s,d,m=0<o.length?po.positions(o,e):[],p=0<m.length?(s=c,d=[],B((f=n).grid.columns,(function(n){be(f,n).map((function(n){return n.element})).forall(s)&&d.push(n)})),I(d,(function(n){var t=pe(f,(function(t){return t.column===n}));return j(t,(function(n){return s(n.element)}))}))):[];!function(n,t,e,r){Fu(n,t,(function(n,t){var o,u,i,c,a,l=(o=t.col,u=t.x-n.left,i=e.top-n.top,c=r,a=An.fromTag("div"),Wt(a,{position:"absolute",left:u-3.5+"px",top:i+"px",height:c+"px",width:"7px"}),Et(a,{"data-column":o,role:"presentation"}),a);return Bu(l,Wu),l}))}(t,I(m,(function(n,t){return A(p,(function(n){return t===n}))})),i,Xr(e))},Hu=function(n,t){var e,r,o;ju(n),n.isResizable(t)&&(e=fe(t),r=Vr(e),o=Hr(e),Lu(e,n,t,r,o))},qu=function(n,t){var e=wt(n.parent(),"."+_u);P(e,t)},Vu=function(n){qu(n,(function(n){zt(n,"display","none")}))},Uu=function(n){qu(n,(function(n){zt(n,"display","block")}))},$u=Nu("resizer-bar-dragging"),Gu=function(n){var t=function(){var n,t=pu({drag:mu(["xDelta","yDelta","target"])}),e=m.none(),r={mutate:function(t,e){n.trigger.drag(t,e)},events:(n=pu({drag:mu(["xDelta","yDelta"])})).registry};return r.events.drag.bind((function(n){e.each((function(e){t.trigger.drag(n.xDelta,n.yDelta,e)}))})),{assign:function(n){e=m.some(n)},get:function(){return e},mutate:r.mutate,events:t.registry}}(),e=function(n,t){return void 0===t&&(t={}),function(n,t,e){var r,o,u=!1,i=pu({start:mu([]),stop:mu([])}),c=xu(),a=function(){s.stop(),c.isOn()&&(c.off(),i.trigger.stop())},l=(r=a,o=null,{cancel:function(){null!==o&&(clearTimeout(o),o=null)},throttle:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];null!==o&&clearTimeout(o),o=setTimeout((function(){r.apply(null,n),o=null}),200)}});c.events.move.bind((function(e){t.mutate(n,e.info)}));var f=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u&&n.apply(null,t)}},s=t.sink(yu({forceDrop:a,drop:f(a),move:f((function(n){l.cancel(),c.onEvent(n,t)})),delayDrop:f(l.throttle)}),e);return{element:s.element,go:function(n){s.start(n),c.on(),i.trigger.start()},on:function(){u=!0},off:function(){u=!1},destroy:function(){s.destroy()},events:i.registry}}(n,void 0!==t.mode?t.mode:Mu,t)}(t,{}),o=m.none(),u=function(n,t){return m.from(Pt(n,t))};t.events.drag.bind((function(n){u(n.target,"data-row").each((function(t){var e=Gt(n.target,"top");zt(n.target,"top",e+n.yDelta+"px")})),u(n.target,"data-column").each((function(t){var e=Gt(n.target,"left");zt(n.target,"left",e+n.xDelta+"px")}))}));var i=function(n,t){return Gt(n,t)-qt(n,"data-initial-"+t,0)};e.events.stop.bind((function(){t.get().each((function(t){o.each((function(e){u(t,"data-row").each((function(n){var r=i(t,"top");Mt(t,"data-initial-top"),s.trigger.adjustHeight(e,r,parseInt(n,10))})),u(t,"data-column").each((function(n){var r=i(t,"left");Mt(t,"data-initial-left"),s.trigger.adjustWidth(e,r,parseInt(n,10))})),Hu(n,e)}))}))}));var c=function(r,o){s.trigger.startAdjust(),t.assign(r),Bt(r,"data-initial-"+o,Gt(r,o)),Bu(r,$u),zt(r,"opacity","0.2"),e.go(n.parent())},a=Ru(n.parent(),"mousedown",(function(n){var t,e;t=n.target,Eu(t,zu)&&c(n.target,"top"),e=n.target,Eu(e,Wu)&&c(n.target,"left")})),l=function(t){return Pn(t,n.view())},f=Ru(n.view(),"mouseover",(function(t){(function(n){return Dt(n,"table",l).filter((function(n){return Dt(n,"[contenteditable]",l).exists(ku)}))})(t.target).fold((function(){pt(t.target)&&ju(n)}),(function(t){o=m.some(t),Hu(n,t)}))})),s=pu({adjustHeight:mu(["table","delta","row"]),adjustWidth:mu(["table","delta","column"]),startAdjust:mu([])});return{destroy:function(){a.unbind(),f.unbind(),e.destroy(),ju(n)},refresh:function(t){Hu(n,t)},on:e.on,off:e.off,hideBars:r(Vu,n),showBars:r(Uu,n),events:s.registry}},Ku=function(n,t,e){var r=so,o=po,u=Gu(n),i=pu({beforeResize:mu(["table","type"]),afterResize:mu(["table","type"]),startDrag:mu([])});return u.events.adjustHeight.bind((function(n){var t=n.table;i.trigger.beforeResize(t,"row"),function(n,t,e,r){var o,u,i,c=fe(n),a=qo(c,n,r,Eo,(function(n){return n.getOrThunk(Xt)})),l=E(a,(function(n,r){return e===r?Math.max(t+n,Xt()):n})),f=(o=l,u=ge(c),E(u,(function(n){var t=Vo(n.row,n.row+n.rowspan,o);return{element:n.element,height:t,rowspan:n.rowspan}}))),s=(i=l,E(c.all,(function(n,t){return{element:n.element,height:i[t]}})));P(s,(function(n){To(n.element,n.height)})),P(f,(function(n){To(n.element,n.height)}));var d=M(l,(function(n,t){return n+t}),0);To(n,d)}(t,r.delta(n.delta,t),n.row,r),i.trigger.afterResize(t,"row")})),u.events.startAdjust.bind((function(n){i.trigger.startDrag()})),u.events.adjustWidth.bind((function(n){var r=n.table;i.trigger.beforeResize(r,"col");var u=o.delta(n.delta,r),c=e(r);$o(r,u,n.column,t,c),i.trigger.afterResize(r,"col")})),{on:u.on,off:u.off,hideBars:u.hideBars,showBars:u.showBars,destroy:u.destroy,events:i.registry}},Xu=function(n,t){return n.fire("newrow",{node:t})},Yu=function(n,t){return n.fire("newcell",{node:t})},Ju=function(n,t,e){n.fire("TableModified",V(V({},e),{table:t}))},Qu={"border-collapse":"collapse",width:"100%"},Zu={border:"1"},ni="preservetable",ti=function(n){return n.getParam("table_sizing_mode","auto")},ei=function(n){return n.getParam("table_responsive_width")},ri=function(n){return n.getParam("table_default_attributes",Zu,"object")},oi=function(n){return n.getParam("table_default_styles",function(n){if(fi(n)){var t=n.getBody().offsetWidth;return V(V({},Qu),{width:t+"px"})}return si(n)?jn(Qu,(function(n,t){return"width"!==t})):Qu}(n),"object")},ui=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},ii=function(n){return n.getParam("table_row_advtab",!0,"boolean")},ci=function(n){return n.getParam("table_advtab",!0,"boolean")},ai=function(n){return n.getParam("table_style_by_css",!1,"boolean")},li=function(n){return"relative"===ti(n)||!0===ei(n)},fi=function(n){return"fixed"===ti(n)||!1===ei(n)},si=function(n){return"responsive"===ti(n)},di=function(n){var t="section",e=n.getParam("table_header_type",t,"string");return D(["section","cells","sectionCells","auto"],e)?e:t},mi=function(n){var t=n.getParam("table_column_resizing",ni,"string");return N(["preservetable","resizetable"],(function(n){return n===t})).getOr(ni)},pi=function(n){return"preservetable"===mi(n)},gi=function(n){var t=n.getParam("table_clone_elements");return h(t)?m.some(t.split(/[ ,]/)):Array.isArray(t)?m.some(t):m.none()},hi=function(n){return n.nodeName.toLowerCase()},vi=function(n){return An.fromDom(n.getBody())},bi=function(n){return n.getBoundingClientRect().width},wi=function(n){return n.getBoundingClientRect().height},yi=function(n){return function(t){return Pn(t,vi(n))}},xi=function(n){return/^\d+(\.\d+)?$/.test(n)?n+"px":n},Ci=function(n){Mt(n,"data-mce-style");var t=function(n){return Mt(n,"data-mce-style")};P(Zt(n),t),P(ne(n),t)},Si=function(n,t){var e=n.dom.getStyle(t,"width")||n.dom.getAttrib(t,"width");return m.from(e).filter(on)},Ti=function(n){return/^(\d+(\.\d+)?)%$/.test(n)},Ri=function(n){return An.fromDom(n.selection.getStart())},Oi=function(n){var t=n;return{get:function(){return t},set:function(n){t=n}}},Di=function(n,t){var e=Oi(parseFloat(n)),r=Oi(Fr(t));return{width:e.get,pixelWidth:r.get,getWidths:function(n,e){return Fo(n,t,Ao,(function(n){return n.fold((function(){return r.minCellWidth()}),(function(n){return n/r.pixelWidth()*100}))}),r=e);var r},getCellDelta:function(n){return n/r.get()*100},singleColumnWidth:function(n,t){return[100-n]},minCellWidth:function(){return Kt()/r.get()*100},setElementWidth:So,adjustTableWidth:function(n){var o=e.get(),u=o+n/100*o;So(t,u),e.set(u),r.set(Fr(t))},isRelative:!0,label:"percent"}},Ai=function(n,t){var r=Oi(n),o=r.get;return{width:o,pixelWidth:o,getWidths:function(n,e){return Ho(n,t,e)},getCellDelta:e,singleColumnWidth:function(n,t){return[Math.max(Kt(),n+t)-n]},minCellWidth:Kt,setElementWidth:Co,adjustTableWidth:function(n){var e=o()+n;Co(t,e),r.set(e)},isRelative:!1,label:"pixel"}},Bi=function(e){return Oo(e).fold((function(){return function(e){var r=function(){return Fr(e)},o=t(0);return{width:r,pixelWidth:r,getWidths:function(n,t){return Ho(n,e,t)},getCellDelta:o,singleColumnWidth:t([0]),minCellWidth:o,setElementWidth:n,adjustTableWidth:n,isRelative:!0,label:"none"}}(e)}),(function(n){return function(n,t){var e=Mo().exec(t);if(null!==e)return Di(e[1],n);var r=ko().exec(t);if(null!==r){var o=parseInt(r[1],10);return Ai(o,n)}var u=Fr(n);return Ai(u,n)}(e,n)}))},Ei=Ai,Pi=Di,Ii=function(n,t){if(li(n)){var e=Si(n,t.dom).filter(Ti).getOrThunk((function(){return su(t)}));return Pi(e,t)}return fi(n)?Ei(Fr(t),t):Bi(t)},Mi=function(n){Mt(n,"width")},ki=function(n,t){var e,r,o;r=Ii(n,t),o=Io(e=t),cu(e,m.some(o),m.none(),r),Mi(e)},Ni=function(n,t){!function(n,t){var e=Fr(n)+"px";cu(n,m.some(e),m.none(),t),Mi(n)}(t,Ii(n,t))},_i=function(n){Ht(n,"width");var t=ne(n),e=0<t.length?t:Zt(n);P(e,(function(n){Ht(n,"width"),Mi(n)})),Mi(n)},zi="bar-",Wi=function(n){return"false"!==Pt(n,"data-mce-resize")},ji=function(n){var e,r,o=m.none(),u=m.none(),i=m.none(),c=function(n){return"TABLE"===n.nodeName},a=function(t){return Ii(n,t)},l=function(){return pi(n)?{resizeTable:function(n,t,e){e&&n(t)},clampTableDelta:function(n,t,e,r,o){if(o){if(0<=e)return e;var u=k(n,(function(n,t){return n+t-r}),0);return Math.max(-u,e)}return Yo(n,t,e,r)},calcLeftEdgeDeltas:e=function(n,t,e,r,o){var u=Jo(n,0<=r?e:t,r,o);return Ko(n,t,e+1,[u,-u],Go)},calcMiddleDeltas:function(n,t,r,o,u,i){return e(n,r,o,u,i)},calcRightEdgeDeltas:function(n,e,r,o,u,i){if(i)return Go(n);var c=o/n.length;return E(n,t(c))}}:function(){var n=function(n,t,e,r){var o=(100+e)/100,u=Math.max(r,(n[t]+e)/o);return E(n,(function(n,e){return(e===t?u:n/o)-n}))},t=function(t,e,r,o,u,i){return i?n(t,e,o,u):(l=r,f=Yo(c=t,a=e,o,u),Ko(c,a,l+1,[f,0],Go));var c,a,l,f};return{resizeTable:function(n,t){return n(t)},clampTableDelta:Yo,calcLeftEdgeDeltas:t,calcMiddleDeltas:function(n,e,r,o,u,i,c){return t(n,r,o,u,i,c)},calcRightEdgeDeltas:function(t,e,r,o,u,i){if(i)return n(t,r,o,u);var c=Yo(t,r,o,u);return Go(t.slice(0,r)).concat([c])}}}();var e};return n.on("init",(function(){var e,r,c,f,s,d=(r=Wi,(e=n).inline?function(n,e,r){return{parent:t(e),view:t(n),origin:t(Jr(0,0)),isResizable:r}}(vi(e),function(){var n=An.fromTag("div");return Wt(n,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Be(gt(An.fromDom(document)),n),n}(),r):Qo(An.fromDom(e.getDoc()),r));i=m.some(d),s=n.getParam("object_resizing",!0),(h(s)?"table"===s:s)&&n.getParam("table_resize_bars",!0,"boolean")&&(c=l(),(f=Ku(d,c,a)).on(),f.events.startDrag.bind((function(t){o=m.some(n.selection.getRng())})),f.events.beforeResize.bind((function(t){var e,r,o,u,i,c=t.table.dom;e=n,o=bi(r=c),u=wi(c),i=zi+t.type,e.fire("ObjectResizeStart",{target:r,width:o,height:u,origin:i})})),f.events.afterResize.bind((function(t){var e,r,u,i,c,a=t.table,l=a.dom;Ci(a),o.each((function(t){n.selection.setRng(t),n.focus()})),e=n,u=bi(r=l),i=wi(l),c=zi+t.type,e.fire("ObjectResized",{target:r,width:u,height:i,origin:c}),n.undoManager.add()})),u=m.some(f))})),n.on("ObjectResizeStart",(function(t){var o,u=t.target;c(u)&&(o=An.fromDom(u),P(n.dom.select(".mce-clonedresizable"),(function(t){n.dom.addClass(t,"mce-"+mi(n)+"-columns")})),!lu(o)&&fi(n)?Ni(n,o):!au(o)&&li(n)&&ki(n,o),fu(o)&&tn(t.origin,zi)&&ki(n,o),e=t.width,r=si(n)?"":Si(n,u).getOr(""))})),n.on("ObjectResized",(function(t){var o,u,i=t.target;c(i)&&(o=An.fromDom(i),u=t.origin,tn(u,"corner-")&&function(t,o,u){var i,c,f,s,d,m,p=en(o,"e");""===r&&ki(n,t),u!==e&&""!==r?(zt(t,"width",r),i=l(),c=a(t),f=pi(n)||p?du(t).columns-1:0,$o(t,u-e,f,i,c)):Ti(r)&&(s=parseFloat(r.replace("%","")),zt(t,"width",u*s/e+"%")),/^(\d+(\.\d+)?)px$/.test(r)&&(m=fe(d=t),ve(m)||P(Zt(d),(function(n){var t=jt(n,"width");zt(n,"width",t),Mt(n,"width")})))}(o,u,t.width),Ci(o),Ju(n,o.dom))})),n.on("SwitchMode",(function(){u.each((function(t){n.mode.isReadOnly()?t.hideBars():t.showBars()}))})),{lazyResize:function(){return u},lazyWire:function(){return i.getOr(Qo(An.fromDom(n.getBody()),Wi))},destroy:function(){u.each((function(n){n.destroy()})),i.each((function(t){var e;e=t,n.inline&&ke(e.parent())}))}}},Fi=function(n,t){return{element:n,offset:t}},Li=function(n,t,e){return n.property().isText(t)&&0===n.property().getText(t).trim().length||n.property().isComment(t)?e(t).bind((function(t){return Li(n,t,e).orThunk((function(){return m.some(t)}))})):m.none()},Hi=function(n,t){return n.property().isText(t)?n.property().getText(t).length:n.property().children(t).length},qi=function(n,t){var e=Li(n,t,n.query().prevSibling).getOr(t);if(n.property().isText(e))return Fi(e,Hi(n,e));var r=n.property().children(e);return 0<r.length?qi(n,r[r.length-1]):Fi(e,Hi(n,e))},Vi=qi,Ui=Le(),$i=function(n,t){Oo(n).bind((function(n){return function(n,t){return m.from(ho.exec(n)).bind((function(n){var e,r=Number(n[1]),o=n[2];return e=o,A(t,(function(n){return A(go[n],(function(n){return e===n}))}))?m.some({value:r,unit:o}):m.none()}))}(n,["fixed","relative","empty"])})).each((function(e){var r=e.value/2;Po(n,r,e.unit),Po(t,r,e.unit)}))},Gi=function(n,t,e){n.cells[t]=e},Ki=function(n,t){return $n(t,n.section)},Xi=function(n,t){var e=n.cells,r=E(e,t);return $n(r,n.section)},Yi=function(n,t){return n.cells[t]},Ji=function(n,t){return Yi(n,t).element},Qi=function(n){return n.cells.length},Zi=function(n){var t=function(n,t){for(var e=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o];(t(i)?e:r).push(i)}return{pass:e,fail:r}}(n,(function(n){return"colgroup"===n.section}));return{rows:t.fail,cols:t.pass}},nc=function(n,t,e,r){e===r?Mt(n,t):Bt(n,t,e)},tc=function(n,t,e){H(bt(n,t)).fold((function(){return Ae(n,e)}),(function(n){return De(n,e)}))},ec=function(n,t){var e=[],r=[],o=function(n){return E(n,(function(n){n.isNew&&e.push(n.element);var t=n.element;return Me(t),P(n.cells,(function(n){n.isNew&&r.push(n.element),nc(n.element,"colspan",n.colspan,1),nc(n.element,"rowspan",n.rowspan,1),Be(t,n.element)})),t}))},u=function(n){return W(n,(function(n){return E(n.cells,(function(n){return nc(n.element,"span",n.colspan,1),n.element}))}))},i=function(t,e){var r,i,c,a=(c=Rt(r=n,i=e).getOrThunk((function(){var n=An.fromTag(i,tt(r).dom);return"thead"===i?tc(r,"caption,colgroup",n):"colgroup"===i?tc(r,"caption",n):Be(r,n),n})),Me(c),c),l=("colgroup"===e?u:o)(t);Ie(a,l)},c=function(t,e){0<t.length?i(t,e):Rt(n,e).each(ke)},a=[],l=[],f=[],s=[];return P(t,(function(n){switch(n.section){case"thead":a.push(n);break;case"tbody":l.push(n);break;case"tfoot":f.push(n);break;case"colgroup":s.push(n)}})),c(s,"colgroup"),c(a,"thead"),c(l,"tbody"),c(f,"tfoot"),{newRows:e,newCells:r}},rc=function(n,t){if(0===n.length)return 0;var e=n[0];return _(n,(function(n){return!t(e.element,n.element)})).fold((function(){return n.length}),(function(n){return n}))},oc=function(n,t){var e=E(n,(function(n){return E(n.cells,a)}));return E(n,(function(r,o){return{details:W(r.cells,(function(r,u){if(!1!==e[o][u])return[];var i=function(n,t,e,r){var o,u=n[t].cells.slice(e),i=rc(u,r),c=(o=e,E(n,(function(n){return Yi(n,o)})).slice(t));return{colspan:i,rowspan:rc(c,r)}}(n,o,u,t);return function(n,t,r,o){for(var u=n;u<n+r;u++)for(var i=t;i<t+o;i++)e[u][i]=!0}(o,u,i.rowspan,i.colspan),[{element:r.element,rowspan:i.rowspan,colspan:i.colspan,isNew:r.isNew}]})),section:r.section}}))},uc=function(n,t,e){var r,o=[];ve(n)&&(r=E(he(n),(function(n){return Un(n.element,e)})),o.push($n(r,"colgroup")));for(var u=0;u<n.grid.rows;u++){for(var i=[],c=0;c<n.grid.columns;c++){var a=de(n,u,c).map((function(n){return Un(n.element,e)})).getOrThunk((function(){return Un(t.gap(),!0)}));i.push(a)}var l=$n(i,n.all[u].section);o.push(l)}return o},ic=function(n,t){return function(n,t){return E(n,(function(n){var e,r=(e=n.details,q(e,(function(n){return rt(n.element).map((function(n){var t=rt(n).isNone();return Un(n,t)}))})).getOrThunk((function(){return Un(t.row(),!0)})));return{element:r.element,cells:n.details,section:n.section,isNew:r.isNew}}))}(oc(n,Pn),t)},cc=function(n,t){return q(n.all,(function(n){return N(n.cells,(function(n){return Pn(t,n.element)}))}))},ac=function(n,t,e,r,o){return function(u,i,c,a,l){var f=fe(i);return t(f,c).map((function(t){var e=uc(f,a,!1),r=n(e,t,Pn,o(a));return{grid:ic(r.grid,a),cursor:r.cursor}})).fold((function(){return m.none()}),(function(n){var t=ec(i,n.grid),o=m.from(l).getOrThunk((function(){return Bi(i)}));return e(i,n.grid,o),r(i),Hu(u,i),m.some({cursor:n.cursor,newRows:t.newRows,newCells:t.newCells})}))}},lc=function(n,t){return Qt(t.element).bind((function(t){return cc(n,t)}))},fc=function(n,t){var e=E(t.selection,(function(t){return Qt(t).bind((function(t){return cc(n,t)}))})),r=Mr(e);return 0<r.length?m.some({cells:r,generators:t.generators,clipboard:t.clipboard}):m.none()},sc=function(n,t){var e=E(t.selection,(function(t){return Qt(t).bind((function(t){return cc(n,t)}))})),r=Mr(e);return 0<r.length?m.some(r):m.none()},dc=function(n,t,e,r){for(var o=Zi(n).rows,u=!0,i=0;i<o.length;i++)for(var c=0;c<Qi(o[0]);c++){var a=e(Ji(o[i],c),t);!0===a&&!1===u?Gi(o[i],c,Un(r(),!0)):!0===a&&(u=!1)}return n},mc=function(n){return{is:function(t){return n===t},isValue:l,isError:a,getOr:t(n),getOrThunk:t(n),getOrDie:t(n),or:function(t){return mc(n)},orThunk:function(t){return mc(n)},fold:function(t,e){return e(n)},map:function(t){return mc(t(n))},mapError:function(t){return mc(n)},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOptional:function(){return m.some(n)}}},pc=function(t){return{is:a,isValue:a,isError:l,getOr:e,getOrThunk:function(n){return n()},getOrDie:function(){return n=String(t),function(){throw new Error(n)}();var n},or:function(n){return n},orThunk:function(n){return n()},fold:function(n,e){return n(t)},map:function(n){return pc(t)},mapError:function(n){return pc(n(t))},each:n,bind:function(n){return pc(t)},exists:a,forall:l,toOptional:m.none}},gc={value:mc,error:pc,fromOption:function(n,t){return n.fold((function(){return pc(t)}),mc)}},hc=function(n,t){return{rowDelta:0,colDelta:Qi(n[0])-Qi(t[0])}},vc=function(n,t){return{rowDelta:n.length-t.length,colDelta:0}},bc=function(n,t,e){var r="colgroup"===t.section?e.col:e.cell;return E(n,(function(){return Un(r(),!0)}))},wc=function(n,t,e){return n.concat(B(t,(function(){var t=n[n.length-1];return Ki(t,bc(t.cells,t,e))})))},yc=function(n,t,r){return E(n,(function(n){var o=bc(B(t,e),n,r);return Ki(n,n.cells.concat(o))}))},xc=function(n,t,r){var o=t.colDelta<0?yc:e;return(t.rowDelta<0?wc:e)(o(n,Math.abs(t.colDelta),r),Math.abs(t.rowDelta),r)},Cc=function(n,t,e,o,u){return function(n,t,e){if(n.row>=t.length||n.column>Qi(t[0]))return gc.error("invalid start address out of table bounds, row: "+n.row+", column: "+n.column);var r=t.slice(n.row),o=r[0].cells.slice(n.column),u=Qi(e[0]),i=e.length;return gc.value({rowDelta:r.length-i,colDelta:o.length-u})}(n,t,e).map((function(i){var c=xc(t,i,o);return function(n,t,e,o,u){for(var i,c,a,l,f,s=n.row,d=n.column,m=s+e.length,p=d+Qi(e[0]),g=s;g<m;g++)for(var h=d;h<p;h++){a=h,l=void 0,l=r(u,Yi((i=t)[c=g],a).element),f=i[c],1<i.length&&1<Qi(f)&&(0<a&&l(Ji(f,a-1))||a<f.cells.length-1&&l(Ji(f,a+1))||0<c&&l(Ji(i[c-1],a))||c<i.length-1&&l(Ji(i[c+1],a)))&&dc(t,Ji(t[g],h),u,o.cell);var v=Ji(e[g-s],h-d),b=o.replace(v);Gi(t[g],h,Un(b,!0))}return t}(n,c,e,o,u)}))},Sc=function(n,t,e,r,o){var u,i,c,a;u=t,i=n,c=o,a=r.cell,0<i&&i<u[0].cells.length&&P(u,(function(n){var t=n.cells[i-1],e=n.cells[i];c(e.element,t.element)&&Gi(n,i,Un(a(),!0))}));var l=vc(e,t),f=xc(e,l,r),s=vc(t,f),d=xc(t,s,r);return E(d,(function(t,e){var r=t.cells.slice(0,n).concat(f[e].cells).concat(t.cells.slice(n,t.cells.length));return Ki(t,r)}))},Tc=function(n,t,e,r,o){!function(n,t,e,r){var o,u,i,c=Zi(n).rows;0<t&&t<c.length&&(o=c[t-1].cells,i=e,u=k(o,(function(n,t){return A(n,(function(n){return i(n.element,t.element)}))?n:n.concat([t])}),[]),P(u,(function(n){for(var o=m.none(),u=t;u<c.length;u++)!function(t){for(var u=0;u<Qi(c[0]);u++)!function(u){var i=c[t].cells[u];e(i.element,n.element)&&(o.isNone()&&(o=m.some(r())),o.each((function(n){Gi(c[t],u,Un(n,!0))})))}(u)}(u)})))}(t,n,o,r.cell);var u=hc(e,t),i=xc(e,u,r),c=hc(t,i),a=xc(t,c,r),l=Zi(a),f=l.cols,s=l.rows;return f.concat(s.slice(0,n)).concat(i).concat(s.slice(n,s.length))},Rc=function(n,t,e,r,o){var u=Zi(n),i=u.rows,c=u.cols,a=i.slice(0,t),l=i.slice(t),f=Xi(i[e],(function(n,e){return 0<t&&t<i.length&&r(Ji(i[t-1],e),Ji(i[t],e))?Yi(i[t],e):Un(o(n.element,r),!0)}));return c.concat(a).concat([f]).concat(l)},Oc=function(n,t,e,r,o){return E(n,(function(n){var u,i,c,a,l,f,s,d,m,p,g,h,v,b=0<t&&t<Qi(n)&&r(Ji(n,t-1),Ji(n,t)),w=(i=t,c=(u=n).section,a=e,l=r,f=o,"colgroup"!==c&&b?Yi(u,i):Un(f(Ji(u,a),l),!0));return d=t,m=w,g=(p=(s=n).cells).slice(0,d),h=p.slice(d),v=g.concat([m]).concat(h),Ki(s,v)}))},Dc=function(n,t,e,r){return E(n,(function(n){return Xi(n,(function(n){return o=n,A(t,(function(n){return e(o.element,n.element)}))?Un(r(n.element,e),!0):n;var o}))}))},Ac=function(n,t,e,r){return void 0!==Ji(n[t],e)&&0<t&&r(Ji(n[t-1],e),Ji(n[t],e))},Bc=function(n,t,e){return 0<t&&e(Ji(n,t-1),Ji(n,t))},Ec=function(n,t,e,r){var o=W(n,(function(r,o){return Ac(n,o,t,e)||Bc(r,t,e)?[]:[Yi(r,t)]}));return Dc(n,o,e,r)},Pc=function(n,t,e,r){var o=Zi(n).rows,u=o[t],i=W(u.cells,(function(n,r){return Ac(o,t,r,e)||Bc(u,r,e)?[]:[n]}));return Dc(n,i,e,r)},Ic=vu(["cell","row","replace","gap","col","colgroup"]),Mc=function(n){return{element:n,colspan:qt(n,"colspan",1),rowspan:qt(n,"rowspan",1)}},kc=function(n,t){void 0===t&&(t=Mc),Ic(n);var e=Oi(m.none()),r=function(e){return function(t){switch(Gn(t.element)){case"col":return n.col(t);default:return n.cell(t)}}(t(e))},o=function(n){var t=r(n);return e.get().isNone()&&e.set(m.some(t)),u=m.some({item:n,replacement:t}),t},u=m.none();return{getOrInit:function(n,t){return u.fold((function(){return o(n)}),(function(e){return t(n,e.item)?e.replacement:o(n)}))},cursor:e.get}},Nc=function(n,t){return function(e){var r=Oi(m.none());Ic(e);var o=[],u=function(u){var i={scope:n},c=e.replace(u,t,i);return o.push({item:u,sub:c}),r.get().isNone()&&r.set(m.some(c)),c};return{replaceOrInit:function(n,t){return e=n,r=t,N(o,(function(n){return r(n.item,e)})).fold((function(){return u(n)}),(function(e){return t(n,e.item)?e.sub:u(n)}));var e,r},cursor:r.get}}},_c=function(n){Ic(n);var t=Oi(m.none());return{combine:function(e){return t.get().isNone()&&t.set(m.some(e)),function(){var t=n.cell({element:e,colspan:1,rowspan:1});return Ht(t,"width"),Ht(e,"width"),t}},cursor:t.get}},zc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Wc=Le(),jc=function(n){return t=n,e=Wc.property().name(t),D(zc,e);var t,e},Fc=function(n){return t=n,e=Wc.property().name(t),D(["ol","ul"],e);var t,e},Lc=function(n){var t,e=function(n){return"br"===Gn(n)},r=function(n){return dr(n).bind((function(t){var r=it(t).map((function(n){return!!jc(n)||!!function(n){return t=n,D(["br","img","hr","input"],Wc.property().name(t));var t}(n)&&"img"!==Gn(n)})).getOr(!1);return rt(t).map((function(o){return!0===r||"li"===Gn(u=o)||St(u,Fc).isSome()||e(t)||jc(o)&&!Pn(n,o)?[]:[An.fromTag("br")];var u}))})).getOr([])},o=0===(t=W(n,(function(n){var t=ct(n);return j(t,(function(n){return e(n)||Qn(n)&&0===ze(n).trim().length}))?[]:t.concat(r(n))}))).length?[An.fromTag("br")]:t;Me(n[0]),Ie(n[0],o)},Hc=function(n){0===Zt(n).length&&ke(n)},qc=function(n,t){return{grid:n,cursor:t}},Vc=function(n,t,e){var r=Zi(n).rows;return Uc(r,t,e).orThunk((function(){return Uc(r,0,0)}))},Uc=function(n,t,e){return m.from(n[t]).bind((function(n){return m.from(n.cells[e]).bind((function(n){return m.from(n.element)}))}))},$c=function(n,t,e){var r=Zi(n).rows;return qc(n,Uc(r,t,e))},Gc=function(n){return k(n,(function(n,t){return A(n,(function(n){return n.row===t.row}))?n:n.concat([t])}),[]).sort((function(n,t){return n.row-t.row}))},Kc=function(n){return k(n,(function(n,t){return A(n,(function(n){return n.column===t.column}))?n:n.concat([t])}),[]).sort((function(n,t){return n.column-t.column}))},Xc=function(n,t,e){var r,o,u=(r=n,o=e.section,oe(r,(function(){return o}))),i=se(u);return uc(i,t,!0)},Yc=function(n,t){var e=I(n,t);return 0===e.length?m.some("td"):e.length===n.length?m.some("th"):m.none()},Jc=function(n,t,e){var r=se(t),o=e.getWidths(r,e);Uo(r,o,e)},Qc=ac((function(n,t,e,r){var o=t[0].row,u=t[0].row,i=Gc(t),c=k(i,(function(n,t){return Rc(n,u,o,e,r.getOrInit)}),n);return $c(c,u,t[0].column)}),sc,n,n,kc),Zc=ac((function(n,t,e,r){var o=Gc(t),u=o[o.length-1].row,i=o[o.length-1].row+o[o.length-1].rowspan,c=k(o,(function(n,t){return Rc(n,i,u,e,r.getOrInit)}),n);return $c(c,i,t[0].column)}),sc,n,n,kc),na=ac((function(n,t,e,r){var o=Kc(t),u=o[0].column,i=o[0].column,c=k(o,(function(n,t){return Oc(n,i,u,e,r.getOrInit)}),n);return $c(c,t[0].row,i)}),sc,Jc,n,kc),ta=ac((function(n,t,e,r){var o=t[t.length-1].column,u=t[t.length-1].column+t[t.length-1].colspan,i=Kc(t),c=k(i,(function(n,t){return Oc(n,u,o,e,r.getOrInit)}),n);return $c(c,t[0].row,u)}),sc,Jc,n,kc),ea=ac((function(n,t,e,r){var o,u,i,c,a=Kc(t),l=(o=n,u=a[0].column,i=a[a.length-1].column,c=E(o,(function(n){var t=n.cells.slice(0,u).concat(n.cells.slice(i+1));return $n(t,n.section)})),I(c,(function(n){return 0<n.cells.length}))),f=Vc(l,t[0].row,t[0].column);return qc(l,f)}),sc,Jc,Hc,kc),ra=ac((function(n,t,e,r){var o,u,i,c,a,l=Gc(t),f=(o=n,u=l[0].row,i=l[l.length-1].row,a=(c=Zi(o)).rows,c.cols.concat(a.slice(0,u)).concat(a.slice(i+1))),s=Vc(f,t[0].row,t[0].column);return qc(f,s)}),sc,n,Hc,kc),oa=(ac((function(n,t,e,r){var o=Ec(n,t.column,e,r.replaceOrInit);return $c(o,t.row,t.column)}),lc,n,n,Nc("row","th")),ac((function(n,t,e,r){var o=Kc(t),u=k(o,(function(n,t){return Ec(n,t.column,e,r.replaceOrInit)}),n);return $c(u,t[0].row,t[0].column)}),sc,n,n,Nc("row","th"))),ua=(ac((function(n,t,e,r){var o=Ec(n,t.column,e,r.replaceOrInit);return $c(o,t.row,t.column)}),lc,n,n,Nc(null,"td")),ac((function(n,t,e,r){var o=Kc(t),u=k(o,(function(n,t){return Ec(n,t.column,e,r.replaceOrInit)}),n);return $c(u,t[0].row,t[0].column)}),sc,n,n,Nc(null,"td"))),ia=(ac((function(n,t,e,r){var o=Pc(n,t.row,e,r.replaceOrInit);return $c(o,t.row,t.column)}),lc,n,n,Nc("col","th")),ac((function(n,t,e,r){var o=Gc(t),u=k(o,(function(n,t){return Pc(n,t.row,e,r.replaceOrInit)}),n);return $c(u,t[0].row,t[0].column)}),sc,n,n,Nc("col","th")),ac((function(n,t,e,r){var o=Pc(n,t.row,e,r.replaceOrInit);return $c(o,t.row,t.column)}),lc,n,n,Nc(null,"td")),ac((function(n,t,e,r){var o=Gc(t),u=k(o,(function(n,t){return Pc(n,t.row,e,r.replaceOrInit)}),n);return $c(u,t[0].row,t[0].column)}),sc,n,n,Nc(null,"td")),ac((function(n,e,r,o){var u=e.cells;Lc(u);var i=function(n,t,e){var r=Zi(n).rows;if(0===r.length)return n;for(var o=t.startRow;o<=t.finishRow;o++)for(var u=t.startCol;u<=t.finishCol;u++)Gi(r[o],u,Un(e(),!1));return n}(n,e.bounds,t(u[0]));return qc(i,m.from(u[0]))}),(function(n,t){return t.mergable}),n,n,_c)),ca=ac((function(n,t,e,r){var o=M(t,(function(n,t){return dc(n,t,e,r.combine(t))}),n);return qc(o,m.from(t[0]))}),(function(n,t){return t.unmergable}),Jc,n,_c),aa=ac((function(n,t,e,r){var o,u,i,c=(o=t.clipboard,u=t.generators,i=fe(o),uc(i,u,!0)),a={row:t.row,column:t.column};return Cc(a,n,c,t.generators,e).fold((function(){return qc(n,m.some(t.element))}),(function(n){var e=Vc(n,t.row,t.column);return qc(n,e)}))}),(function(n,t){return Qt(t.element).bind((function(e){return cc(n,e).map((function(n){return V(V({},n),{generators:t.generators,clipboard:t.clipboard})}))}))}),Jc,n,kc),la=ac((function(n,t,e,r){var o=Zi(n).rows,u=t.cells[0].column,i=o[t.cells[0].row],c=Xc(t.clipboard,t.generators,i),a=Sc(u,n,c,t.generators,e),l=Vc(a,t.cells[0].row,t.cells[0].column);return qc(a,l)}),fc,n,n,kc),fa=ac((function(n,t,e,r){var o=Zi(n).rows,u=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,i=o[t.cells[0].row],c=Xc(t.clipboard,t.generators,i),a=Sc(u,n,c,t.generators,e),l=Vc(a,t.cells[0].row,t.cells[0].column);return qc(a,l)}),fc,n,n,kc),sa=ac((function(n,t,e,r){var o=Zi(n).rows,u=t.cells[0].row,i=o[u],c=Xc(t.clipboard,t.generators,i),a=Tc(u,n,c,t.generators,e),l=Vc(a,t.cells[0].row,t.cells[0].column);return qc(a,l)}),fc,n,n,kc),da=ac((function(n,t,e,r){var o=Zi(n).rows,u=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,i=o[t.cells[0].row],c=Xc(t.clipboard,t.generators,i),a=Tc(u,n,c,t.generators,e),l=Vc(a,t.cells[0].row,t.cells[0].column);return qc(a,l)}),fc,n,n,kc),ma=function(n,t){var e=fe(n);return sc(e,t).bind((function(n){var t=n[n.length-1],r=n[0].column,o=t.column+t.colspan,u=z(E(e.all,(function(n){return I(n.cells,(function(n){return n.column>=r&&n.column<o}))})));return Yc(u,(function(n){return"th"===Gn(n.element)}))})).getOr("")},pa=function(n){return hi(n.parentNode)},ga=function(n,t){var e="thead"===pa(t),r=!A(t.cells,(function(n){return"th"!==hi(n)}));return e||r?m.some({thead:e,ths:r}):m.none()},ha=function(n,t){return"thead"===(e=ga(0,t).fold((function(){return pa(t)}),(function(n){return"thead"})))?"header":"tfoot"===e?"footer":"body";var e},va=function(n,t,e){var r,o,u=n.getParent(t,"table"),i=t.parentNode,c=hi(i);e!==c&&((r=n.select(e,u)[0])||(r=n.create(e),o=u.firstChild,"thead"===e?H(bt(An.fromDom(u),"caption,colgroup")).fold((function(){return u.insertBefore(r,o)}),(function(t){return n.insertAfter(r,t.dom)})):u.appendChild(r)),"tbody"===e&&"thead"===c&&r.firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t),i.hasChildNodes()||n.remove(i))},ba=function(n,t,e,r){var o=n.dom,u=function(n,t,e){if(x(e)&&hi(t)!==e){var r=n.dom.rename(t,e);return Yu(n,r),r}return t}(n,t,e);return y(r)||o.setAttrib(u,"scope",r),u},wa=function(n,t,e,r){return P(t,(function(t){return ba(n,t,e,r)}))},ya=function(n,t,e){var r,o,u,i=n.dom;"header"===e?(o="auto"===(r=di(n))?(u=te(An.fromDom(t.cells[0])).map(ee).getOr([]),q(u,(function(n){return ga(0,n.dom)})).map((function(n){return n.thead&&n.ths?"sectionCells":n.thead?"section":"cells"})).getOr("section")):r,wa(n,t.cells,"section"===o?"td":"th","col"),va(i,t,"cells"===o?"tbody":"thead")):(wa(n,t.cells,"td",null),va(i,t,"footer"===e?"tfoot":"tbody"))},xa=function(n){return function(t){var e,r=Gn(t),o="col"===r||"colgroup"===r?te(e=t).bind((function(n){return Qe(n,Ar.firstSelectedSelector)})).fold((function(){return e}),(function(n){return n[0]})):t;return Dt(o,n)}},Ca=xa("th,td"),Sa=xa("th,td,caption"),Ta=function(n,t){return Ca(n).map((function(n){return Dr(t)})).getOr([])},Ra=function(n,t){var e,r,o,u=Ca(n);return r=u.bind((function(n){return te(n)})).map(ee),o=function(n,e){return I(e,(function(e){return A(Or(e.dom.cells),(function(e){return"1"===Pt(e,t)||Pn(e,n)}))}))},((e=u).isSome()&&r.isSome()?m.some(o(e.getOrDie(),r.getOrDie())):m.none()).getOr([])},Oa={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Da=function(n,t,e,r){return B(n,(function(n){return function(n,t,e,r){for(var o=An.fromTag("tr"),u=0;u<n;u++){var i=An.fromTag(r<t||u<e?"th":"td");u<e&&Bt(i,"scope","row"),r<t&&Bt(i,"scope","col"),Be(i,An.fromTag("br")),Be(o,i)}return o}(t,e,r,n)}))},Aa=function(n,t){n.selection.select(t.dom,!0),n.selection.collapse(!0)},Ba=function(n,t,e,o,u){var i=oi(n),c={styles:i,attributes:ri(n),colGroups:n.getParam("table_use_colgroups",!1,"boolean")};return n.undoManager.ignore((function(){var r=function(n,t,e,r,o,u){void 0===u&&(u=Oa);var i=An.fromTag("table"),c="cells"!==o;Wt(i,u.styles),Et(i,u.attributes),u.colGroups&&Be(i,function(n){var t=An.fromTag("colgroup");return B(n,(function(){return Be(t,An.fromTag("col"))})),t}(t));var a,l,f=Math.min(n,e);c&&0<e&&(a=An.fromTag("thead"),Be(i,a),l=Da(e,t,"sectionCells"===o?f:0,r),Ie(a,l));var s=An.fromTag("tbody");Be(i,s);var d=Da(c?n-f:n,t,c?0:e,r);return Ie(s,d),i}(e,t,u,o,di(n),c);Bt(r,"data-mce-id","__mce");var i,a,l,f=(i=r,a=An.fromTag("div"),l=An.fromDom(i.dom.cloneNode(!0)),Be(a,l),a.dom.innerHTML);n.insertContent(f),n.addVisual()})),Ot(vi(n),'table[data-mce-id="__mce"]').map((function(t){var e,o,u;return fi(n)?Ni(n,t):si(n)?_i(t):(li(n)||(e=i.width,h(e)&&-1!==e.indexOf("%")))&&ki(n,t),Ci(t),Mt(t,"data-mce-id"),o=n,P(wt(t,"tr"),(function(n){Xu(o,n.dom),P(wt(n,"th,td"),(function(n){Yu(o,n.dom)}))})),u=n,Ot(t,"td,th").each(r(Aa,u)),t.dom})).getOr(null)},Ea=function(n,t,e,r,o){void 0===r&&(r={});var u=function(n){return S(n)&&0<n};if(u(t)&&u(e)){var i=r.headerRows||0,c=r.headerColumns||0;return Ba(n,e,t,c,i)}return console.error(o),null},Pa=function(n){return function(){return n().fold((function(){return[]}),(function(n){return E(n,(function(n){return n.dom}))}))}},Ia=function(n){return function(t){var e=0<t.length?m.some(Or(t)):m.none();n(e)}},Ma=function(n,t,e){var r=qt(n,t,1);1===e||r<=1?Mt(n,t):Bt(n,t,Math.min(e,r))},ka=tinymce.util.Tools.resolve("tinymce.util.Tools"),Na=function(n,t,e){return function(t,r){for(var o=0;o<r.length;o++){var u=n.getStyle(r[o],e);if(void 0===t&&(t=u),t!==u)return""}return t}(void 0,n.select("td,th",t))},_a=function(n,t,e){e&&n.formatter.apply("align"+e,{},t)},za=function(n,t){ka.each("left center right".split(" "),(function(e){n.formatter.remove("align"+e,{},t)}))},Wa=function(n,t){return(t||[]).concat(E(n,(function(n){var t=n.text||n.title;return function(n){return Ln(t=n,e="menu")&&void 0!==t[e]&&null!==t[e];var t,e}(n)?{text:t,items:Wa(n.menu)}:{text:t,value:n.value}})))},ja=function(n){return function(t){return tn(t,"rgb")?n.toHex(t):t}},Fa=function(n,t){var e=An.fromDom(t);return{borderwidth:Lt(e,"border-width").getOr(""),borderstyle:Lt(e,"border-style").getOr(""),bordercolor:Lt(e,"border-color").map(ja(n)).getOr(""),backgroundcolor:Lt(e,"background-color").map(ja(n)).getOr("")}},La=function(n){var t=n[0],e=n.slice(1);return P(e,(function(n){P(kn(t),(function(e){_n(n,(function(n,r){var o=t[e];""!==o&&e===r&&o!==n&&(t[e]="")}))}))})),t},Ha=function(n){var t=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(t):t}},qa=function(n,t,e,r){return N(n,(function(n){return e.formatter.matchNode(r,t+n)})).getOr("")},Va=r(qa,["left","center","right"],"align"),Ua=r(qa,["top","middle","bottom"],"valign"),$a=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"H Align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"V Align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],Ga=function(n){return $a.concat((0<(t=Wa(n.getParam("table_cell_class_list",[],"array"))).length?m.some({name:"class",type:"listbox",label:"Class",items:t}):m.none()).toArray());var t},Ka=function(n){return function(t,e){var r=t.dom;return{setAttrib:function(t,o){n&&!o||r.setAttrib(e,t,o)},setStyle:function(t,o){n&&!o||r.setStyle(e,t,o)},setFormat:function(r,o){n&&!o||(""===o?t.formatter.remove(r,{value:null},e,!0):t.formatter.apply(r,{value:o},e))}}}},Xa={normal:Ka(!1),ifTruthy:Ka(!0)},Ya=function(n){return te(n[0]).map((function(t){var e=fe(t),r=ge(e),o=I(r,(function(t){return A(n,(function(n){return Pn(t.element,n)}))}));return E(o,(function(n){return{element:n.element.dom,column:be(e,n.column).map((function(n){return n.element.dom}))}}))}))},Ja=function(n,t,e){var r=e.getData();e.close(),n.undoManager.transact((function(){(function(n,t,e){var r,o=1===t.length;1<=t.length&&(r=te(t[0]),Ya(t).each((function(t){P(t,(function(t){var r,u,i,c,a,l,f,s,d,m,p=ba(n,t.element,e.celltype),g=o?Xa.normal(n,p):Xa.ifTruthy(n,p);u=t.column.map((function(t){return o?Xa.normal(n,t):Xa.ifTruthy(n,t)})).getOr(g),i=e,(r=g).setAttrib("scope",i.scope),r.setAttrib("class",i.class),r.setStyle("height",xi(i.height)),u.setStyle("width",xi(i.width)),ui(n)&&(a=e,(c=g).setFormat("tablecellbackgroundcolor",a.backgroundcolor),c.setFormat("tablecellbordercolor",a.bordercolor),c.setFormat("tablecellborderstyle",a.borderstyle),c.setFormat("tablecellborderwidth",xi(a.borderwidth))),o&&(za(n,p),l=n,f=p,ka.each("top middle bottom".split(" "),(function(n){l.formatter.remove("valign"+n,{},f)}))),e.halign&&_a(n,p,e.halign),e.valign&&(s=n,d=p,(m=e.valign)&&s.formatter.apply("valign"+m,{},d))}))})),r.each((function(t){return Ju(n,t.dom)})))})(n,t,r),n.focus()}))},Qa=function(n,t){var e,o,u,i=Ta(Ri(n),t);0!==i.length&&(e=function(n,t){var e=Ya(t).map((function(t){return E(t,(function(t){return e=n,r=t.element,o=ui(n),u=t.column,i=e.dom,c=u.getOr(r),V({width:(a=function(n,t){return i.getStyle(n,t)||i.getAttrib(n,t)})(c,"width"),height:a(r,"height"),scope:i.getAttrib(r,"scope"),celltype:hi(r),class:i.getAttrib(r,"class",""),halign:Va(e,r),valign:Ua(e,r)},o?Fa(i,r):{});var e,r,o,u,i,c,a}))}));return La(e.getOrDie())}(n,i),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ga(n)},Ha("cell")]},u={type:"panel",items:[{type:"grid",columns:2,items:Ga(n)}]},n.windowManager.open({title:"Cell Properties",size:"normal",body:ui(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onSubmit:r(Ja,n,i)}))},Za=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],nl=function(n){return Za.concat((0<(t=Wa(n.getParam("table_row_class_list",[],"array"))).length?m.some({name:"class",type:"listbox",label:"Class",items:t}):m.none()).toArray());var t},tl=function(n,t,e,r){var o=r.getData();r.close(),n.undoManager.transact((function(){(function(n,t,e,r){var o=1===t.length;P(t,(function(t){r.type!==hi(t.parentNode)&&ya(n,t,r.type);var u,i,c,a,l=o?Xa.normal(n,t):Xa.ifTruthy(n,t);i=r,(u=l).setAttrib("scope",i.scope),u.setAttrib("class",i.class),u.setStyle("height",xi(i.height)),ii(n)&&(a=r,(c=l).setStyle("background-color",a.backgroundcolor),c.setStyle("border-color",a.bordercolor),c.setStyle("border-style",a.borderstyle)),r.align!==e.align&&(za(n,t),_a(n,t,r.align))})),te(An.fromDom(t[0])).each((function(t){return Ju(n,t.dom)}))})(n,t,e,o),n.focus()}))},el=function(n){var t,e,o,u,i=Ra(Ri(n),Ar.selected);0!==i.length&&(t=E(i,(function(t){return e=n,r=t.dom,o=ii(n),u=e.dom,V({height:u.getStyle(r,"height")||u.getAttrib(r,"height"),scope:u.getAttrib(r,"scope"),class:u.getAttrib(r,"class",""),type:ha(0,r),align:Va(e,r)},o?Fa(u,r):{});var e,r,o,u})),e=La(t),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:nl(n)},Ha("row")]},u={type:"panel",items:[{type:"grid",columns:2,items:nl(n)}]},n.windowManager.open({title:"Row Properties",size:"normal",body:ii(n)?o:u,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:e,onSubmit:r(tl,n,E(i,(function(n){return n.dom})),e)}))},rl=tinymce.util.Tools.resolve("tinymce.Env"),ol=function(n,t,e,r){if("TD"===t.tagName||"TH"===t.tagName)h(e)?n.setStyle(t,e,r):n.setStyle(t,e);else if(t.children)for(var o=0;o<t.children.length;o++)ol(n,t.children[o],e,r)},ul=function(n,t,e){var r,o=n.dom,u=e.getData();e.close(),""===u.class&&delete u.class,n.undoManager.transact((function(){var e,i;t||(e=parseInt(u.cols,10)||1,i=parseInt(u.rows,10)||1,t=Ba(n,e,i,0,0)),function(n,t,e){var r,o=n.dom,u={},i={};if(u.class=e.class,i.height=xi(e.height),o.getAttrib(t,"width")&&!ai(n)?u.width=(r=e.width)?r.replace(/px$/,""):"":i.width=xi(e.width),ai(n)?(i["border-width"]=xi(e.border),i["border-spacing"]=xi(e.cellspacing)):(u.border=e.border,u.cellpadding=e.cellpadding,u.cellspacing=e.cellspacing),ai(n)&&t.children)for(var c=0;c<t.children.length;c++)ol(o,t.children[c],{"border-width":xi(e.border),padding:xi(e.cellpadding)}),ci(n)&&ol(o,t.children[c],{"border-color":e.bordercolor});ci(n)&&(i["background-color"]=e.backgroundcolor,i["border-color"]=e.bordercolor,i["border-style"]=e.borderstyle),u.style=o.serializeStyle(V(V({},oi(n)),i)),o.setAttribs(t,V(V({},ri(n)),u)),Ju(n,t)}(n,t,u),(r=o.select("caption",t)[0])&&!u.caption&&o.remove(r),!r&&u.caption&&((r=o.create("caption")).innerHTML=rl.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),""===u.align?za(n,t):_a(n,t,u.align),n.focus(),n.addVisual()}))},il=function(n,t){var e,o,u,i,c,a,l,f,s=n.dom,d=function(n,t){var e,r,o,u,i=oi(n),c=ri(n),a=t?(e=n.dom,{borderstyle:Fn(i,"border-style").getOr(""),bordercolor:ja(e)(Fn(i,"border-color").getOr("")),backgroundcolor:ja(e)(Fn(i,"background-color").getOr(""))}):{};return V(V(V(V(V(V({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),i),c),a),(u=i["border-width"],ai(n)&&u?{border:u}:Fn(c,"border").fold((function(){return{}}),(function(n){return{border:n}})))),(r=Fn(i,"border-spacing").or(Fn(c,"cellspacing")).fold((function(){return{}}),(function(n){return{cellspacing:n}})),o=Fn(i,"border-padding").or(Fn(c,"cellpadding")).fold((function(){return{}}),(function(n){return{cellpadding:n}})),V(V({},r),o)))}(n,ci(n));!1===t?(e=s.getParent(n.selection.getStart(),"table"))?(u=e,i=ci(o=n),f=o.dom,d=V({width:f.getStyle(u,"width")||f.getAttrib(u,"width"),height:f.getStyle(u,"height")||f.getAttrib(u,"height"),cellspacing:f.getStyle(u,"border-spacing")||f.getAttrib(u,"cellspacing"),cellpadding:f.getAttrib(u,"cellpadding")||Na(o.dom,u,"padding"),border:(c=f,a=u,l=Lt(An.fromDom(a),"border-width"),ai(o)&&l.isSome()?l.getOr(""):c.getAttrib(a,"border")||Na(o.dom,a,"border-width")||Na(o.dom,a,"border")),caption:!!f.select("caption",u)[0],class:f.getAttrib(u,"class",""),align:Va(o,u)},i?Fa(f,u):{})):ci(n)&&(d.borderstyle="",d.bordercolor="",d.backgroundcolor=""):(d.cols="1",d.rows="1",ci(n)&&(d.borderstyle="",d.bordercolor="",d.backgroundcolor=""));var m=Wa(n.getParam("table_class_list",[],"array"));0<m.length&&d.class&&(d.class=d.class.replace(/\s*mce\-item\-table\s*/g,""));var p,g,h,v,b={type:"grid",columns:2,items:(p=m,g=t?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],h=n.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],v=0<p.length?[{type:"listbox",name:"class",label:"Class",items:p}]:[],g.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(h).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(v))},w=ci(n)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[b]},Ha("table")]}:{type:"panel",items:[b]};n.windowManager.open({title:"Table Properties",size:"normal",body:w,onSubmit:r(ul,n,e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:d})},cl=function(n){return Sa(Ri(n))},al=function(n){return Ca(Ri(n))},ll=function(t,e,o,u,i){var a=yi(t),l=function(n){return te(n,a)},f=function(n){return function(e){t.selection.setRng(e),t.focus(),o.clear(n),Ci(n),Ju(t,n.dom)}},s=function(n){return al(t).each((function(t){l(t).each((function(e){var r=Er(u,e,t);n(e,r).each(f(e))}))}))},d=function(){return al(t).map((function(e){return l(e).bind((function(r){return function(n,t,e){var r=fe(n);return sc(r,t).map((function(n){var t=uc(r,e,!1),o=Zi(t).rows.slice(n[0].row,n[n.length-1].row+n[n.length-1].rowspan),u=ic(o,e);return E(u,(function(n){var t=gr(n.element);return P(n.cells,(function(n){var e=hr(n.element);nc(e,"colspan",n.colspan,1),nc(e,"rowspan",n.rowspan,1),Be(t,e)})),t}))}))}(r,Er(u,r,e),Tr(n,An.fromDom(t.getDoc()),m.none()))}))}))},p=function(){return al(t).map((function(n){return l(n).bind((function(t){return function(n,t){var e=fe(n);return sc(e,t).map((function(n){var t,r,o=n[n.length-1],u=n[0].column,i=o.column+o.colspan;return U(function(n,t,e){if(ve(n)){var r=I(he(n),(function(n){return n.column>=t&&n.column<e})),o=E(r,(function(n){var r=hr(n.element);return Ma(r,"span",e-t),r})),u=An.fromTag("colgroup");return Ie(u,o),[u]}return[]}(e,u,i),(t=u,r=i,E(e.all,(function(n){var e=I(n.cells,(function(n){return n.column>=t&&n.column<r})),o=E(e,(function(n){var e=hr(n.element);return Ma(e,"colspan",r-t),e})),u=An.fromTag("tr");return Ie(u,o),u}))))}))}(t,Er(u,t,n))}))}))},g=function(n,e){return e().each((function(e){var r=E(e,hr);al(t).each((function(e){return l(e).each((function(e){var o,i,c=Rr(An.fromDom(t.getDoc())),a=(o=r,i=c,{selection:Dr(u),clipboard:o,generators:i});n(e,a).each(f(e))}))}))}))};_n({mceTableSplitCells:function(){return s(e.unmergeCells)},mceTableMergeCells:function(){return s(e.mergeCells)},mceTableInsertRowBefore:function(){return s(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return s(e.insertRowsAfter)},mceTableInsertColBefore:function(){return s(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return s(e.insertColumnsAfter)},mceTableDeleteCol:function(){return s(e.deleteColumn)},mceTableDeleteRow:function(){return s(e.deleteRow)},mceTableCutCol:function(n){return p().each((function(n){i.setColumns(n),s(e.deleteColumn)}))},mceTableCutRow:function(n){return d().each((function(n){i.setRows(n),s(e.deleteRow)}))},mceTableCopyCol:function(n){return p().each((function(n){return i.setColumns(n)}))},mceTableCopyRow:function(n){return d().each((function(n){return i.setRows(n)}))},mceTablePasteColBefore:function(n){return g(e.pasteColsBefore,i.getColumns)},mceTablePasteColAfter:function(n){return g(e.pasteColsAfter,i.getColumns)},mceTablePasteRowBefore:function(n){return g(e.pasteRowsBefore,i.getRows)},mceTablePasteRowAfter:function(n){return g(e.pasteRowsAfter,i.getRows)},mceTableDelete:function(){return cl(t).each((function(n){te(n,a).filter(c(a)).each((function(n){var e,r=An.fromText("");De(n,r),ke(n),t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):((e=t.dom.createRng()).setStart(r.dom,0),e.setEnd(r.dom,0),t.selection.setRng(e),t.nodeChanged())}))}))},mceTableSizingMode:function(n,e){return r=e,cl(t).each((function(n){si(t)||fi(t)||li(t)||te(n,a).each((function(n){"relative"!==r||au(n)?"fixed"!==r||lu(n)?"responsive"!==r||fu(n)||_i(n):Ni(t,n):ki(t,n),Ci(n),Ju(t,n.dom)}))}));var r}},(function(n,e){return t.addCommand(e,n)}));var b=function(n,t){t.each((function(t){Ju(n,t.dom)}))};_n({mceTableCellType:function(n,r){var o=te(Ri(t),a);e.setTableCellType(t,r),b(t,o)},mceTableRowType:function(n,r){var o=te(Ri(t),a);e.setTableRowType(t,r),b(t,o)}},(function(n,e){return t.addCommand(e,n)})),t.addCommand("mceTableColType",(function(n,t){return Fn(t,"type").each((function(n){return s("th"===n?e.makeColumnsHeader:e.unmakeColumnsHeader)}))})),_n({mceTableProps:r(il,t,!1),mceTableRowProps:r(el,t),mceTableCellProps:r(Qa,t,u)},(function(n,e){return t.addCommand(e,(function(){return n()}))})),t.addCommand("mceInsertTable",(function(n,e){v(e)&&0<kn(e).length?Ea(t,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):il(t,!0)})),t.addCommand("mceTableApplyCellStyle",(function(n,e){var r,o,i=function(n){return"tablecell"+n.toLowerCase().replace("-","")};!v(e)||0!==(r=Ta(Ri(t),u)).length&&(function(n){for(var t in n)if(Nn.call(n,t))return!1;return!0}(o=jn(e,(function(n,e){return t.formatter.has(i(e))&&h(n)})))||(_n(o,(function(n,e){P(r,(function(r){Xa.normal(t,r.dom).setFormat(i(e),n)}))})),l(r[0]).each((function(n){return Ju(t,n.dom,{structure:!1,style:!0})}))))}))},fl={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},sl=nr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),dl=V(V({},sl),{none:function(n){return void 0===n&&(n=void 0),sl.none(n)}}),ml=function(n,t){return te(n,t).bind((function(t){var e=Zt(t);return _(e,(function(t){return Pn(n,t)})).map((function(n){return{index:n,all:e}}))}))},pl=function(n,t,e,r){return{start:n,soffset:t,finish:e,foffset:r}},gl=nr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),hl={before:gl.before,on:gl.on,after:gl.after,cata:function(n,t,e,r){return n.fold(t,e,r)},getStart:function(n){return n.fold(e,e,e)}},vl=nr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),bl={domRange:vl.domRange,relative:vl.relative,exact:vl.exact,exactFromRange:function(n){return vl.exact(n.start,n.soffset,n.finish,n.foffset)},getWin:function(n){var t=n.match({domRange:function(n){return An.fromDom(n.startContainer)},relative:function(n,t){return hl.getStart(n)},exact:function(n,t,e,r){return n}});return An.fromDom(et(t).dom.defaultView)},range:pl},wl=function(n,t,e){var r,o,u=n.document.createRange();return r=u,t.fold((function(n){r.setStartBefore(n.dom)}),(function(n,t){r.setStart(n.dom,t)}),(function(n){r.setStartAfter(n.dom)})),o=u,e.fold((function(n){o.setEndBefore(n.dom)}),(function(n,t){o.setEnd(n.dom,t)}),(function(n){o.setEndAfter(n.dom)})),u},yl=function(n,t,e,r,o){var u=n.document.createRange();return u.setStart(t.dom,e),u.setEnd(r.dom,o),u},xl=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}},Cl=nr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Sl=function(n,t,e){return t(An.fromDom(e.startContainer),e.startOffset,An.fromDom(e.endContainer),e.endOffset)},Tl=function(n,e){var r,o,u,i=(r=n,e.match({domRange:function(n){return{ltr:t(n),rtl:m.none}},relative:function(n,t){return{ltr:G((function(){return wl(r,n,t)})),rtl:G((function(){return m.some(wl(r,t,n))}))}},exact:function(n,t,e,o){return{ltr:G((function(){return yl(r,n,t,e,o)})),rtl:G((function(){return m.some(yl(r,e,o,n,t))}))}}}));return(u=(o=i).ltr()).collapsed?o.rtl().filter((function(n){return!1===n.collapsed})).map((function(n){return Cl.rtl(An.fromDom(n.endContainer),n.endOffset,An.fromDom(n.startContainer),n.startOffset)})).getOrThunk((function(){return Sl(0,Cl.ltr,u)})):Sl(0,Cl.ltr,u)},Rl=function(n,t){return Tl(n,t).match({ltr:function(t,e,r,o){var u=n.document.createRange();return u.setStart(t.dom,e),u.setEnd(r.dom,o),u},rtl:function(t,e,r,o){var u=n.document.createRange();return u.setStart(r.dom,o),u.setEnd(t.dom,e),u}})},Ol=(Cl.ltr,Cl.rtl,function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}),Dl=function(n,t,e,r){return Qn(t)?function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getClientRects();return q(u,(function(n){return Ol(n,e,r)?m.some(n):m.none()})).map((function(o){return function(n,t,e,r,o){var u=function(e){var r=n.dom.createRange();return r.setStart(t.dom,e),r.collapse(!0),r},i=ze(t).length,c=function(n,t,e,r,o){if(0===o)return 0;if(t===r)return o-1;for(var u=r,i=1;i<o;i++){var c=n(i),a=Math.abs(t-c.left);if(e<=c.bottom){if(e<c.top||u<a)return i-1;u=a}}return 0}((function(n){return u(n).getBoundingClientRect()}),e,r,o.right,i);return u(c)}(n,t,e,r,o)}))}(n,t,e,r):(u=t,i=e,c=r,a=(o=n).dom.createRange(),l=ct(u),q(l,(function(n){return a.selectNode(n.dom),Ol(a.getBoundingClientRect(),i,c)?Dl(o,n,i,c):m.none()})));var o,u,i,c,a,l},Al=function(n,t){return t-n.left<n.right-t},Bl=function(n,t,e){var r=n.dom.createRange();return r.selectNode(t.dom),r.collapse(e),r},El=function(n,t,e){var r=n.dom.createRange();r.selectNode(t.dom);var o=r.getBoundingClientRect(),u=Al(o,e);return(!0===u?sr:dr)(t).map((function(t){return Bl(n,t,u)}))},Pl=function(n,t,e){var r=t.dom.getBoundingClientRect(),o=Al(r,e);return m.some(Bl(n,t,o))},Il=document.caretPositionFromPoint?function(n,t,e){return m.from(n.dom.caretPositionFromPoint(t,e)).bind((function(t){if(null===t.offsetNode)return m.none();var e=n.dom.createRange();return e.setStart(t.offsetNode,t.offset),e.collapse(),m.some(e)}))}:document.caretRangeFromPoint?function(n,t,e){return m.from(n.dom.caretRangeFromPoint(t,e))}:function(n,t,e){return An.fromPoint(n,t,e).bind((function(r){var o=function(){return e=n,u=t,(0===ct(o=r).length?Pl:El)(e,o,u);var e,o,u};return 0===ct(r).length?o():function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getBoundingClientRect();return function(n,t,e,r){var o=n.dom.createRange();o.selectNode(t.dom);var u=o.getBoundingClientRect(),i=Math.max(u.left,Math.min(u.right,e)),c=Math.max(u.top,Math.min(u.bottom,r));return Dl(n,t,i,c)}(n,t,Math.max(u.left,Math.min(u.right,e)),Math.max(u.top,Math.min(u.bottom,r)))}(n,r,t,e).orThunk(o)}))},Ml=function(n,t){var e=Gn(n);return"input"===e?hl.after(n):D(["br","img"],e)?0===t?hl.before(n):hl.after(n):hl.on(n,t)},kl=function(n,t){var e=n.fold(hl.before,Ml,hl.after),r=t.fold(hl.before,Ml,hl.after);return bl.relative(e,r)},Nl=function(n,t,e,r){var o=Ml(n,t),u=Ml(e,r);return bl.relative(o,u)},_l=function(n){return m.from(n.getSelection())},zl=function(n,t){_l(n).each((function(n){n.removeAllRanges(),n.addRange(t)}))},Wl=function(n,t,e,r,o){var u=yl(n,t,e,r,o);zl(n,u)},jl=function(n,t){return Tl(n,t).match({ltr:function(t,e,r,o){Wl(n,t,e,r,o)},rtl:function(t,e,r,o){_l(n).each((function(u){if(u.setBaseAndExtent)u.setBaseAndExtent(t.dom,e,r.dom,o);else if(u.extend)try{c=t,a=e,l=r,f=o,(i=u).collapse(c.dom,a),i.extend(l.dom,f)}catch(u){Wl(n,r,o,t,e)}else Wl(n,r,o,t,e);var i,c,a,l,f}))}})},Fl=function(n,t,e,r,o){var u=Nl(t,e,r,o);jl(n,u)},Ll=function(n,t,e){var r=kl(t,e);jl(n,r)},Hl=function(n){if(0<n.rangeCount){var t=n.getRangeAt(0),e=n.getRangeAt(n.rangeCount-1);return m.some(pl(An.fromDom(t.startContainer),t.startOffset,An.fromDom(e.endContainer),e.endOffset))}return m.none()},ql=function(n){if(null===n.anchorNode||null===n.focusNode)return Hl(n);var t=An.fromDom(n.anchorNode),e=An.fromDom(n.focusNode);return function(n,t,e,r){var o,u,i,c,a,l=(u=t,i=e,c=r,(a=tt(o=n).dom.createRange()).setStart(o.dom,u),a.setEnd(i.dom,c),a),f=Pn(n,e)&&t===r;return l.collapsed&&!f}(t,n.anchorOffset,e,n.focusOffset)?m.some(pl(t,n.anchorOffset,e,n.focusOffset)):Hl(n)},Vl=function(n){return _l(n).filter((function(n){return 0<n.rangeCount})).bind(ql).map((function(n){return bl.exact(n.start,n.soffset,n.finish,n.foffset)}))},Ul=tinymce.util.Tools.resolve("tinymce.util.VK"),$l=function(n,t,e,r){return Xl(n,t,ml(o=e,undefined).fold((function(){return dl.none(o)}),(function(n){return n.index+1<n.all.length?dl.middle(o,n.all[n.index+1]):dl.last(o)})),r);var o},Gl=function(n,t,e,r){return Xl(n,t,ml(o=e,undefined).fold((function(){return dl.none()}),(function(n){return 0<=n.index-1?dl.middle(o,n.all[n.index-1]):dl.first(o)})),r);var o},Kl=function(n,t){return function(n){var t=bl.getWin(n).dom,e=function(n,e,r,o){return yl(t,n,e,r,o)},r=n.match({domRange:function(n){var t=An.fromDom(n.startContainer),e=An.fromDom(n.endContainer);return Nl(t,n.startOffset,e,n.endOffset)},relative:kl,exact:Nl});return Tl(t,r).match({ltr:e,rtl:e})}(bl.exact(t,0,t,0))},Xl=function(n,t,e,r){return e.fold(m.none,m.none,(function(n,t){return sr(t).map((function(n){return Kl(0,n)}))}),(function(e){return te(e,t).bind((function(t){var o,u=Br(e);return n.undoManager.transact((function(){r.insertRowsAfter(t,u)})),o=wt(t,"tr"),H(o).bind((function(n){return Ot(n,"td,th").map((function(n){return Kl(0,n)}))}))}))}))},Yl=["table","li","dl"],Jl=function(n,t,e){var r,o,u,i;n.keyCode===Ul.TAB&&(r=vi(t),o=function(n){var t=Gn(n);return Pn(n,r)||D(Yl,t)},(u=t.selection.getRng()).collapsed&&(i=An.fromDom(u.startContainer),Qt(i,o).each((function(r){n.preventDefault(),(n.shiftKey?Gl:$l)(t,o,r,e).each((function(n){t.selection.setRng(n)}))}))))},Ql=function(n,t){return{selection:n,kill:t}},Zl=function(n,t,e,r){return{start:hl.on(n,t),finish:hl.on(e,r)}},nf=function(n,t){var e=Rl(n,t);return pl(An.fromDom(e.startContainer),e.startOffset,An.fromDom(e.endContainer),e.endOffset)},tf=Zl,ef=function(n,t,e,r,o){return Pn(e,r)?m.none():Ke(e,r,t).bind((function(t){var r=t.boxes.getOr([]);return 0<r.length?(o(n,r,t.start,t.finish),m.some(Ql(m.some(tf(e,0,e,ar(e))),!0))):m.none()}))},rf=function(n,t){return{item:n,mode:t}},of=function(n,t,e,r){return void 0===r&&(r=uf),n.property().parent(t).map((function(n){return rf(n,r)}))},uf=function(n,t,e,r){return void 0===r&&(r=cf),e.sibling(n,t).map((function(n){return rf(n,r)}))},cf=function(n,t,e,r){void 0===r&&(r=cf);var o=n.property().children(t);return e.first(o).map((function(n){return rf(n,r)}))},af=[{current:of,next:uf,fallback:m.none()},{current:uf,next:cf,fallback:m.some(of)},{current:cf,next:cf,fallback:m.some(uf)}],lf=function(n,t,e,r,o){return void 0===o&&(o=af),N(o,(function(n){return n.current===e})).bind((function(e){return e.current(n,t,r,e.next).orThunk((function(){return e.fallback.bind((function(e){return lf(n,t,e,r)}))}))}))},ff=function(n,t,e,r,o,u){return lf(n,t,r,o).bind((function(t){return u(t.item)?m.none():e(t.item)?m.some(t.item):ff(n,t.item,e,t.mode,o,u)}))},sf=function(n){return function(t){return 0===n.property().children(t).length}},df=function(n,t,e,r){return ff(n,t,e,uf,{sibling:function(n,t){return n.query().prevSibling(t)},first:function(n){return 0<n.length?m.some(n[n.length-1]):m.none()}},r)},mf=function(n,t,e,r){return ff(n,t,e,uf,{sibling:function(n,t){return n.query().nextSibling(t)},first:function(n){return 0<n.length?m.some(n[0]):m.none()}},r)},pf=Le(),gf=function(n,t){return df(e=pf,n,sf(e),t);var e},hf=function(n,t){return mf(e=pf,n,sf(e),t);var e},vf=nr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),bf=function(n){return Dt(n,"tr")},wf=V(V({},vf),{verify:function(n,t,e,r,o,u,i){return Dt(r,"td,th",i).bind((function(e){return Dt(t,"td,th",i).map((function(t){return Pn(e,t)?Pn(r,e)&&ar(e)===o?u(t):vf.none("in same cell"):$e(bf,[e,t]).fold((function(){return o=t,i=e,c=(r=n).getRect(o),(a=r.getRect(i)).right>c.left&&a.left<c.right?vf.success():u(t);var r,o,i,c,a}),(function(n){return u(t)}))}))})).getOr(vf.none("default"))},cata:function(n,t,e,r,o){return n.fold(t,e,r,o)}}),yf=function(n){return"br"===Gn(n)},xf=function(n,t,e){return t(n,e).bind((function(n){return Qn(n)&&0===ze(n).trim().length?xf(n,t,e):m.some(n)}))},Cf=function(n,t,e,o){return at(u=t,i=e).filter(yf).orThunk((function(){return at(u,i-1).filter(yf)})).bind((function(t){return o.traverse(t).fold((function(){return xf(t,o.gather,n).map(o.relative)}),(function(n){return rt(t=n).bind((function(n){var e=ct(n);return function(n,t){return _(n,r(Pn,t))}(e,t).map((function(r){return{parent:n,children:e,element:t,index:r}}))})).map((function(n){return hl.on(n.parent,n.index)}));var t}))}));var u,i},Sf=function(n,t){return{left:n.left,top:n.top+t,right:n.right,bottom:n.bottom+t}},Tf=function(n,t){return{left:n.left,top:n.top-t,right:n.right,bottom:n.bottom-t}},Rf=function(n,t,e){return{left:n.left+t,top:n.top+e,right:n.right+t,bottom:n.bottom+e}},Of=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom}},Df=function(n,t){return m.some(n.getRect(t))},Af=function(n,t,e){return Jn(t)?Df(n,t).map(Of):Qn(t)?(r=n,o=t,(0<=(u=e)&&u<ar(o)?r.getRangedRect(o,u,o,u+1):0<u?r.getRangedRect(o,u-1,o,u):m.none()).map(Of)):m.none();var r,o,u},Bf=function(n,t){return Jn(t)?Df(n,t).map(Of):Qn(t)?n.getRangedRect(t,0,t,ar(t)).map(Of):m.none()},Ef=nr([{none:[]},{retry:["caret"]}]),Pf=function(n,t,e){return yt((function(n,t){return t(n)}),St,t,jc,undefined).fold(a,(function(t){return Bf(n,t).exists((function(n){return r=n,(t=e).left<r.left||Math.abs(r.right-t.left)<1||t.left>r.right;var t,r}))}))},If={point:function(n){return n.bottom},adjuster:function(n,t,e,r,o){var u=Sf(o,5);return Math.abs(e.bottom-r.bottom)<1||e.top>o.bottom?Ef.retry(u):e.top===o.bottom?Ef.retry(Sf(o,1)):Pf(n,t,o)?Ef.retry(Rf(u,5,0)):Ef.none()},move:Sf,gather:hf},Mf=function(n,t,e,r,o){return 0===o?m.some(r):(a=n,l=r.left,f=t.point(r),a.elementFromPoint(l,f).filter((function(n){return"table"===Gn(n)})).isSome()?(i=r,c=o-1,Mf(n,u=t,e,u.move(i,5),c)):n.situsFromPoint(r.left,t.point(r)).bind((function(u){return u.start.fold(m.none,(function(u){return Bf(n,u).bind((function(i){return t.adjuster(n,u,i,e,r).fold(m.none,(function(r){return Mf(n,t,e,r,o-1)}))})).orThunk((function(){return m.some(r)}))}),m.none)})));var u,i,c,a,l,f},kf=function(n,t,e){var r,o,u,i=n.move(e,5),c=Mf(t,n,e,i,100).getOr(i);return o=c,u=t,((r=n).point(o)>u.getInnerHeight()?m.some(r.point(o)-u.getInnerHeight()):r.point(o)<0?m.some(-r.point(o)):m.none()).fold((function(){return t.situsFromPoint(c.left,n.point(c))}),(function(e){return t.scrollBy(0,e),t.situsFromPoint(c.left,n.point(c)-e)}))},Nf={tryUp:r(kf,{point:function(n){return n.top},adjuster:function(n,t,e,r,o){var u=Tf(o,5);return Math.abs(e.top-r.top)<1||e.bottom<o.top?Ef.retry(u):e.bottom===o.top?Ef.retry(Tf(o,1)):Pf(n,t,o)?Ef.retry(Rf(u,5,0)):Ef.none()},move:Tf,gather:gf}),tryDown:r(kf,If),ieTryUp:function(n,t){return n.situsFromPoint(t.left,t.top-5)},ieTryDown:function(n,t){return n.situsFromPoint(t.left,t.bottom+5)},getJumpSize:t(5)},_f=function(n,t,e){return n.getSelection().bind((function(r){return function(n,t,e,r){var o,u,i;return(yf(t)?(o=n,u=t,(i=r).traverse(u).orThunk((function(){return xf(u,i.gather,o)})).map(i.relative)):Cf(n,t,e,r)).map((function(n){return{start:n,finish:n}}))}(t,r.finish,r.foffset,e).fold((function(){return m.some(Fi(r.finish,r.foffset))}),(function(o){var u,i=n.fromSitus(o);return u=wf.verify(n,r.finish,r.foffset,i.finish,i.foffset,e.failure,t),wf.cata(u,(function(n){return m.none()}),(function(){return m.none()}),(function(n){return m.some(Fi(n,0))}),(function(n){return m.some(Fi(n,ar(n)))}))}))}))},zf=function(n,t,e,r,o,u){return 0===u?m.none():Ff(n,t,e,r,o).bind((function(i){var c=n.fromSitus(i),a=wf.verify(n,e,r,c.finish,c.foffset,o.failure,t);return wf.cata(a,(function(){return m.none()}),(function(){return m.some(i)}),(function(i){return Pn(e,i)&&0===r?Wf(n,e,r,Tf,o):zf(n,t,i,0,o,u-1)}),(function(i){return Pn(e,i)&&r===ar(i)?Wf(n,e,r,Sf,o):zf(n,t,i,ar(i),o,u-1)}))}))},Wf=function(n,t,e,r,o){return Af(n,t,e).bind((function(t){return jf(n,o,r(t,Nf.getJumpSize()))}))},jf=function(n,t,e){var r=On().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?t.otherRetry(n,e):r.isIE()?t.ieRetry(n,e):m.none()},Ff=function(n,t,e,r,o){return Af(n,e,r).bind((function(t){return jf(n,o,t)}))},Lf=function(n,t,e,r,o){return Dt(r,"td,th",t).bind((function(r){return Dt(r,"table",t).bind((function(u){return function(n,t){return St(n,(function(n){return rt(n).exists((function(n){return Pn(n,t)}))}),void 0).isSome()}(o,u)?_f(i=n,c=t,a=e).bind((function(n){return zf(i,c,n.element,n.offset,a,20).map(i.fromSitus)})).bind((function(n){return Dt(n.finish,"td,th",t).map((function(t){return{start:r,finish:t,range:n}}))})):m.none();var i,c,a}))}))},Hf=function(n,t,e,r,o,u){return On().browser.isIE()?m.none():u(r,t).orThunk((function(){return Lf(n,t,e,r,o).map((function(n){var t=n.range;return Ql(m.some(tf(t.start,t.soffset,t.finish,t.foffset)),!0)}))}))},qf=function(n,t){return Dt(n,"tr",t).bind((function(n){return Dt(n,"table",t).bind((function(e){var r=wt(e,"tr");return Pn(n,r[0])?df(pf,e,(function(n){return dr(n).isSome()}),t).map((function(n){var t=ar(n);return Ql(m.some(tf(n,t,n,t)),!0)})):m.none()}))}))},Vf=function(n,t){return Dt(n,"tr",t).bind((function(n){return Dt(n,"table",t).bind((function(e){var r=wt(e,"tr");return Pn(n,r[r.length-1])?mf(pf,e,(function(n){return sr(n).isSome()}),t).map((function(n){return Ql(m.some(tf(n,0,n,0)),!0)})):m.none()}))}))},Uf=function(n,t,e,r,o,u,i){return Lf(n,e,r,o,u).bind((function(n){return ef(t,e,n.start,n.finish,i)}))},$f=function(n,t){return Dt(n,"td,th",t)};var Gf={traverse:it,gather:hf,relative:hl.before,otherRetry:Nf.tryDown,ieRetry:Nf.ieTryDown,failure:wf.failedDown},Kf={traverse:ut,gather:gf,relative:hl.before,otherRetry:Nf.tryUp,ieRetry:Nf.ieTryUp,failure:wf.failedUp},Xf=function(n){return function(t){return t===n}},Yf=Xf(38),Jf=Xf(40),Qf=function(n){return 37<=n&&n<=40},Zf={isBackward:Xf(37),isForward:Xf(39)},ns={isBackward:Xf(39),isForward:Xf(37)},ts=function(n){return{elementFromPoint:function(t,e){return An.fromPoint(An.fromDom(n.document),t,e)},getRect:function(n){return n.dom.getBoundingClientRect()},getRangedRect:function(t,e,r,o){var u=bl.exact(t,e,r,o);return function(n,t){var e,r,o;return 0<(o=0<(r=(e=Rl(n,t)).getClientRects()).length?r[0]:e.getBoundingClientRect()).width||0<o.height?m.some(o).map(xl):m.none()}(n,u)},getSelection:function(){return Vl(n).map((function(t){return nf(n,t)}))},fromSitus:function(t){var e=bl.relative(t.start,t.finish);return nf(n,e)},situsFromPoint:function(t,e){return function(n,t,e){return r=t,o=e,u=An.fromDom(n.document),Il(u,r,o).map((function(n){return pl(An.fromDom(n.startContainer),n.startOffset,An.fromDom(n.endContainer),n.endOffset)}));var r,o,u}(n,t,e).map((function(n){return Zl(n.start,n.soffset,n.finish,n.foffset)}))},clearSelection:function(){_l(n).each((function(n){return n.removeAllRanges()}))},collapseSelection:function(t){void 0===t&&(t=!1),Vl(n).each((function(e){return e.fold((function(n){return n.collapse(t)}),(function(e,r){var o=t?e:r;Ll(n,o,o)}),(function(e,r,o,u){var i=t?e:o,c=t?r:u;Fl(n,i,c,i,c)}))}))},setSelection:function(t){Fl(n,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:function(t,e){Ll(n,t,e)},selectContents:function(t){!function(n,t){var e,r,o=(e=t,function(n,t){n.selectNodeContents(t.dom)}(r=n.document.createRange(),e),r);zl(n,o)}(n,t)},getInnerHeight:function(){return n.innerHeight},getScrollY:function(){var t,e,r,o;return(t=An.fromDom(n.document),e=void 0!==t?t.dom:document,r=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop,Jr(r,o)).top},scrollBy:function(t,e){var r,o,u,i;r=t,o=e,(i=(void 0!==(u=An.fromDom(n.document))?u.dom:document).defaultView)&&i.scrollBy(r,o)}}},es=function(n,t){return{rows:n,cols:t}},rs=function(n,t,e,r){var o=function(n,t,e,r){var o,u=(o=Oi(m.none()),{clear:function(){return o.set(m.none())},set:function(n){return o.set(m.some(n))},isSet:function(){return o.get().isSome()},on:function(n){return o.get().each(n)}}),i=u.clear;return{clearstate:i,mousedown:function(n){r.clear(t),$f(n.target,e).each(u.set)},mouseover:function(o){u.on((function(u){r.clearBeforeUpdate(t),$f(o.target,e).each((function(o){Ke(u,o,e).each((function(e){var i=e.boxes.getOr([]);(1<i.length||1===i.length&&!Pn(u,o))&&(r.selectRange(t,i,e.start,e.finish),n.selectContents(o))}))}))}))},mouseup:function(n){i()}}}(ts(n),t,e,r);return{clearstate:o.clearstate,mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},os=function(n,t,e){var r=function(t){Mt(t,n.selected),Mt(t,n.firstSelected),Mt(t,n.lastSelected)},o=function(t){Bt(t,n.selected,"1")},u=function(n){i(n),e()},i=function(t){var e=wt(t,n.selectedSelector);P(e,r)};return{clearBeforeUpdate:i,clear:u,selectRange:function(e,r,i,c){u(e),P(r,o),Bt(i,n.firstSelected,"1"),Bt(c,n.lastSelected,"1"),t(r,i,c)},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},us=function(n){return!1===Eu(An.fromDom(n.target),"ephox-snooker-resizer-bar")};function is(t,e,o){var u=os(Ar,(function(e,r,u){o.targets().each((function(o){te(r).each((function(i){var c=gi(t),a=Tr(n,An.fromDom(t.getDoc()),c),l=function(n,t,e){var r=fe(n);return sc(r,t).map((function(n){var t,o,u,i,c,a,l,f,s,d=uc(r,e,!1);return{upOrLeftCells:(t=n,o=e,u=d.slice(0,t[t.length-1].row+1),i=ic(u,o),W(i,(function(n){var e=n.cells.slice(0,t[t.length-1].column+1);return E(e,(function(n){return n.element}))}))),downOrRightCells:(a=n,l=e,f=(c=d).slice(a[0].row+a[0].rowspan-1,c.length),s=ic(f,l),W(s,(function(n){var t=n.cells.slice(a[0].column+a[0].colspan-1,n.cells.length);return E(t,(function(n){return n.element}))})))}}))}(i,o,a);!function(n,t,e,r,o){n.fire("TableSelectionChange",{cells:t,start:e,finish:r,otherCells:o})}(t,e,r,u,l)}))}))}),(function(){return function(n){n.fire("TableSelectionClear")}(t)}));return t.on("init",(function(o){var i=t.getWin(),c=vi(t),a=yi(t),l=rs(i,c,a,u),f=function(n,t,e,o){var u=ts(n),i=function(){return o.clear(t),m.none()};return{keydown:function(n,c,a,l,f,s){var d=n.raw,p=d.which,g=!0===d.shiftKey;return Xe(t,o.selectedSelector).fold((function(){return Jf(p)&&g?r(Uf,u,t,e,Gf,l,c,o.selectRange):Yf(p)&&g?r(Uf,u,t,e,Kf,l,c,o.selectRange):Jf(p)?r(Hf,u,e,Gf,l,c,Vf):Yf(p)?r(Hf,u,e,Kf,l,c,qf):m.none}),(function(n){var e=function(e){return function(){return q(e,(function(e){return r=e.rows,u=e.cols,i=t,Je(n,r,u,(c=o).firstSelectedSelector,c.lastSelectedSelector).map((function(n){return c.clearBeforeUpdate(i),c.selectRange(i,n.boxes,n.start,n.finish),n.boxes}));var r,u,i,c})).fold((function(){return Ye(t,o.firstSelectedSelector,o.lastSelectedSelector).map((function(n){var e=Jf(p)||s.isForward(p)?hl.after:hl.before;return u.setRelativeSelection(hl.on(n.first,0),e(n.table)),o.clear(t),Ql(m.none(),!0)}))}),(function(n){return m.some(Ql(m.none(),!0))}))}};return Jf(p)&&g?e([es(1,0)]):Yf(p)&&g?e([es(-1,0)]):s.isBackward(p)&&g?e([es(0,-1),es(-1,0)]):s.isForward(p)&&g?e([es(0,1),es(1,0)]):Qf(p)&&0==g?i:m.none}))()},keyup:function(n,r,u,i,c){return Xe(t,o.selectedSelector).fold((function(){var a,l,f,s,d,p,g,h=n.raw,v=h.which;return 0!=(!0===h.shiftKey)&&Qf(v)?(a=t,l=e,f=r,s=u,d=i,p=c,g=o.selectRange,Pn(f,d)&&s===p?m.none():Dt(f,"td,th",l).bind((function(n){return Dt(d,"td,th",l).bind((function(t){return ef(a,l,n,t,g)}))}))):m.none()}),m.none)}}}(i,c,a,u),s=function(n,t,e,r){var o=ts(n);return function(n,u){r.clearBeforeUpdate(t),Ke(n,u,e).each((function(n){var e=n.boxes.getOr([]);r.selectRange(t,e,n.start,n.finish),o.selectContents(u),o.collapseSelection()}))}}(i,c,a,u);t.on("TableSelectorChange",(function(n){return s(n.start,n.finish)}));var d,p,g=function(n,e){!0===n.raw.shiftKey&&(e.kill&&n.kill(),e.selection.each((function(n){var e=bl.relative(n.start,n.finish),r=Rl(i,e);t.selection.setRng(r)})))},h=function(n){return 0===n.button},v=(d=Oi(An.fromDom(c)),p=Oi(0),{touchEnd:function(n){var t,e,r=An.fromDom(n.target);"td"!==Gn(r)&&"th"!==Gn(r)||(t=d.get(),e=p.get(),Pn(t,r)&&n.timeStamp-e<300&&(n.preventDefault(),s(r,r))),d.set(r),p.set(n.timeStamp)}});t.on("dragstart",(function(n){l.clearstate()})),t.on("mousedown",(function(n){h(n)&&us(n)&&l.mousedown(Ou(n))})),t.on("mouseover",(function(n){var t;(void 0===(t=n).buttons||rl.browser.isEdge()&&0===t.buttons||0!=(1&t.buttons))&&us(n)&&l.mouseover(Ou(n))})),t.on("mouseup",(function(n){h(n)&&us(n)&&l.mouseup(Ou(n))})),t.on("touchend",v.touchEnd),t.on("keyup",(function(n){var e,r,o,u=Ou(n);u.raw.shiftKey&&Qf(u.raw.which)&&(e=t.selection.getRng(),r=An.fromDom(e.startContainer),o=An.fromDom(e.endContainer),f.keyup(u,r,e.startOffset,o,e.endOffset).each((function(n){g(u,n)})))})),t.on("keydown",(function(n){var r=Ou(n);e().each((function(n){return n.hideBars()}));var o=t.selection.getRng(),u=An.fromDom(o.startContainer),i=An.fromDom(o.endContainer),c=Ur(Zf,ns)(An.fromDom(t.selection.getStart()));f.keydown(r,u,o.startOffset,i,o.endOffset,c).each((function(n){g(r,n)})),e().each((function(n){return n.showBars()}))})),t.on("NodeChange",(function(){var e=t.selection,r=An.fromDom(e.getStart()),o=An.fromDom(e.getEnd());$e(te,[r,o]).fold((function(){return u.clear(c)}),n)}))})),{clear:u.clear}}ir.add("table",(function(t){var e=function(n,t,e){return{get:function(){return Qe(n(),e).fold((function(){return t().map(ur).getOrThunk(rr)}),(function(n){return or(n)}))}}}((function(){return vi(t)}),(function(){return Sa(Ri(t))}),Ar.selectedSelector),r=function(n,t){var e=Oi(m.none()),r=Oi([]),o=function(){return Sa(Ri(n)).bind((function(n){return te(n).map((function(e){return"caption"===Gn(n)?Br(n):Er(t,e,n)}))}))},u=function(){e.set(G(o)()),P(r.get(),(function(n){return n()}))},i=function(n,t){var o=function(){return e.get().fold((function(){n.setDisabled(!0)}),(function(e){n.setDisabled(t(e))}))};return o(),r.set(r.get().concat([o])),function(){r.set(I(r.get(),(function(n){return n!==o})))}};return n.on("NodeChange ExecCommand TableSelectorChange",u),{onSetupTable:function(n){return i(n,(function(n){return!1}))},onSetupCellOrRow:function(n){return i(n,(function(n){return"caption"===Gn(n.element)}))},onSetupPasteable:function(n){return function(t){return i(t,(function(t){return"caption"===Gn(t.element)||n().isNone()}))}},onSetupMergeable:function(n){return i(n,(function(n){return n.mergable.isNone()}))},onSetupUnmergeable:function(n){return i(n,(function(n){return n.unmergable.isNone()}))},resetTargets:u,targets:function(){return e.get()}}}(t,e),o=ji(t),u=is(t,o.lazyResize,r),i=function(t,e,r){var o=function(n){return"table"===Gn(vi(n))},u=gi(t),i=function(n,e,r,o){return function(i,c){Ci(i);var a=o(),l=An.fromDom(t.getDoc()),f=Tr(r,l,u),s=Ii(t,i);return e(i)?n(a,i,c,f,s).bind((function(n){return P(n.newRows,(function(n){Xu(t,n.dom)})),P(n.newCells,(function(n){Yu(t,n.dom)})),n.cursor.map((function(n){var e=Vi(Ui,n),r=t.dom.createRng();return r.setStart(e.element.dom,e.offset),r.setEnd(e.element.dom,e.offset),r}))})):m.none()}},c=i(ra,(function(n){return!1===o(t)||1<du(n).rows}),n,e),a=i(ea,(function(n){return!1===o(t)||1<du(n).columns}),n,e),f=i(Qc,l,n,e),s=i(Zc,l,n,e),d=i(na,l,$i,e),p=i(ta,l,$i,e),g=i(ia,l,n,e),h=i(ca,l,n,e),v=i(la,l,n,e),b=i(fa,l,n,e),w=i(sa,l,n,e),y=i(da,l,n,e),x=i(aa,l,n,e),C=function(n,t){return Fn(n,"type").filter((function(n){return D(t,n)}))};return{deleteRow:c,deleteColumn:a,insertRowsBefore:f,insertRowsAfter:s,insertColumnsBefore:d,insertColumnsAfter:p,mergeCells:g,unmergeCells:h,pasteColsBefore:v,pasteColsAfter:b,pasteRowsBefore:w,pasteRowsAfter:y,pasteCells:x,setTableCellType:function(n,t){return C(t,["td","th"]).each((function(t){var e=E(Ta(Ri(n),r),(function(n){return n.dom}));wa(n,e,t,null)}))},setTableRowType:function(n,t){return C(t,["header","body","footer"]).each((function(t){E(Ra(Ri(n),Ar.selected),(function(e){return ya(n,e.dom,t)}))}))},makeColumnsHeader:i(oa,l,n,e),unmakeColumnsHeader:i(ua,l,n,e),getTableRowType:function(n){var t=Ra(Ri(n),Ar.selected);if(0<t.length){var e=E(t,(function(n){return ha(0,n.dom)})),r=D(e,"header"),o=D(e,"footer");if(r||o){var u=D(e,"body");return!r||u||o?r||u||!o?"":"footer":"header"}return"body"}},getTableCellType:function(n){return Yc(Ta(Ri(n),r),(function(n){return"th"===Gn(n)})).getOr("")},getTableColType:ma}}(t,o.lazyWire,e),c=function(){var n=Oi(m.none()),t=Oi(m.none()),e=function(n){n.set(m.none())};return{getRows:n.get,setRows:function(r){n.set(r),e(t)},clearRows:function(){return e(n)},getColumns:t.get,setColumns:function(r){t.set(r),e(n)},clearColumns:function(){return e(t)}}}();return ll(t,i,u,e,c),function(n,t,e){var r=yi(n);_n({mceTableRowType:function(){return t.getTableRowType(n)},mceTableCellType:function(){return t.getTableCellType(n)},mceTableColType:function(){return Ca(Ri(n)).bind((function(n){return te(n,r).map((function(r){var o=Er(e,r,n);return t.getTableColType(r,o)}))})).getOr("")}},(function(t,e){return n.addQueryValueHandler(e,t)}))}(t,i,e),function(t,e,r,o){t.on("BeforeGetContent",(function(r){!0===r.selection&&er(e.get(),n,(function(n){r.preventDefault(),te(n[0]).map(hr).map((function(n){return[cr(n,"[data-mce-selected]")]})).each((function(n){var e;r.content="text"===r.format?E(n,(function(n){return n.dom.innerText})).join(""):(e=t,E(n,(function(n){return e.selection.serializer.serialize(n.dom,{})})).join(""))}))}),n)})),t.on("BeforeSetContent",(function(n){!0===n.selection&&!0===n.paste&&m.from(t.dom.getParent(t.selection.getStart(),"th,td")).each((function(e){var u=An.fromDom(e);te(u).each((function(e){var i,c,a,l,f,s,d=I((i=n.content,(c=document.createElement("div")).innerHTML=i,ct(An.fromDom(c))),(function(n){return"meta"!==Gn(n)}));1===d.length&&(s=d[0],"table"===Gn(s))&&(n.preventDefault(),a=An.fromDom(t.getDoc()),l=Rr(a),f={element:u,clipboard:d[0],generators:l},r.pasteCells(e,f).each((function(n){t.selection.setRng(n),t.focus(),o.clear(e)})))}))}))}))}(t,e,i,u),function(n,t,e){var r=function(t){return function(){return n.execCommand(t)}},o=function(t){n.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},u={text:"Table properties",onSetup:t.onSetupTable,onAction:r("mceTableProps")},i={text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,onAction:r("mceTableDelete")};n.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:r("mceTableInsertRowBefore"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:r("mceTableInsertRowAfter"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:r("mceTableDeleteRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:r("mceTableRowProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(e.getRows)}),n.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(e.getRows)}),n.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:r("mceTableInsertColBefore"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:r("mceTableInsertColAfter"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:r("mceTableDeleteCol"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:t.onSetupPasteable(e.getColumns)}),n.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:t.onSetupPasteable(e.getColumns)}),n.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:r("mceTableCellProps"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:r("mceTableMergeCells"),onSetup:t.onSetupMergeable}),n.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:r("mceTableSplitCells"),onSetup:t.onSetupUnmergeable}),!1===n.getParam("table_grid",!0,"boolean")?n.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:r("mceInsertTable")}):n.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:o}]}}),n.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:r("mceInsertTable")}),n.ui.registry.addMenuItem("tableprops",u),n.ui.registry.addMenuItem("deletetable",i),n.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}}),n.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}}),n.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}}),n.ui.registry.addContextMenu("table",{update:function(){return t.resetTargets(),t.targets().fold((function(){return""}),(function(n){return"caption"===Gn(n.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}})}(t,r,c),function(n,t,e){n.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(n){return n("inserttable | cell row column | advtablesort | tableprops deletetable")}});var r=function(t){return function(){return n.execCommand(t)}};n.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:r("mceTableProps"),icon:"table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:r("mceTableDelete"),icon:"table-delete-table",onSetup:t.onSetupTable}),n.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:r("mceTableCellProps"),icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:r("mceTableMergeCells"),icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:r("mceTableSplitCells"),icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:r("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:r("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:r("mceTableDeleteRow"),icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:r("mceTableRowProps"),icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:r("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:r("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:r("mceTableDeleteCol"),icon:"table-delete-column",onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:r("mceTableCutRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:r("mceTableCopyRow"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:r("mceTablePasteRowBefore"),onSetup:t.onSetupPasteable(e.getRows)}),n.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:r("mceTablePasteRowAfter"),onSetup:t.onSetupPasteable(e.getRows)}),n.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:r("mceTableCutCol"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:r("mceTableCopyCol"),onSetup:t.onSetupCellOrRow}),n.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:r("mceTablePasteColBefore"),onSetup:t.onSetupPasteable(e.getColumns)}),n.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:r("mceTablePasteColAfter"),onSetup:t.onSetupPasteable(e.getColumns)}),n.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:r("mceInsertTable"),icon:"table"})}(t,r,c),function(n){var t=n.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol");0<t.length&&n.ui.registry.addContextToolbar("table",{predicate:function(t){return n.dom.is(t,"table")&&n.getBody().contains(t)},items:t,scope:"node",position:"node"})}(t),t.on("PreInit",(function(){t.serializer.addTempAttr(Ar.firstSelected),t.serializer.addTempAttr(Ar.lastSelected),function(n){n.formatter.register(fl)}(t)})),function(n){return n.getParam("table_tab_navigation",!0,"boolean")}(t)&&t.on("keydown",(function(n){Jl(n,t,i)})),t.on("remove",(function(){o.destroy()})),function(n,t,e,r){return{insertTable:(o=n,function(n,t,e){void 0===e&&(e={});var r=Ea(o,t,n,e,"Invalid values for insertTable - rows and columns values are required to insert a table.");return o.undoManager.add(),r}),setClipboardRows:Ia(t.setRows),getClipboardRows:Pa(t.getRows),setClipboardCols:Ia(t.setColumns),getClipboardCols:Pa(t.getColumns),resizeHandler:e,selectionTargets:r};var o}(t,c,o,r)}))}();